{"version":3,"file":"zerxzLib.js","mappings":"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","sources":["webpack://extension-zerxz-lib/webpack/bootstrap","webpack://extension-zerxz-lib/webpack/runtime/define property getters","webpack://extension-zerxz-lib/webpack/runtime/hasOwnProperty shorthand","webpack://extension-zerxz-lib/external module \"../../../../../script.js\"","webpack://extension-zerxz-lib/external module \"../../../../../scripts/openai.js\"","webpack://extension-zerxz-lib/external module \"../../../../../scripts/popup.js\"","webpack://extension-zerxz-lib/./src/utils/constants.ts","webpack://extension-zerxz-lib/external module \"../../../../../scripts/secrets.js\"","webpack://extension-zerxz-lib/./src/utils/utils.ts","webpack://extension-zerxz-lib/./src/utils/gemini.ts","webpack://extension-zerxz-lib/./src/utils/toastr.ts","webpack://extension-zerxz-lib/./node_modules/@lit/reactive-element/css-tag.js","webpack://extension-zerxz-lib/./node_modules/@lit/reactive-element/reactive-element.js","webpack://extension-zerxz-lib/./node_modules/lit-html/lit-html.js","webpack://extension-zerxz-lib/./node_modules/lit-element/lit-element.js","webpack://extension-zerxz-lib/./node_modules/lit-html/directive.js","webpack://extension-zerxz-lib/./node_modules/lit-html/directive-helpers.js","webpack://extension-zerxz-lib/./node_modules/lit-html/directives/repeat.js","webpack://extension-zerxz-lib/./src/layouts/GeminiLayouts.ts","webpack://extension-zerxz-lib/./node_modules/lit-html/async-directive.js","webpack://extension-zerxz-lib/./node_modules/lit-html/directives/ref.js","webpack://extension-zerxz-lib/./node_modules/signal-polyfill/dist/index.js","webpack://extension-zerxz-lib/./node_modules/@lit-labs/signals/lib/signal-watcher.js","webpack://extension-zerxz-lib/./node_modules/@lit-labs/signals/lib/watch.js","webpack://extension-zerxz-lib/./node_modules/@lit-labs/signals/lib/html-tag.js","webpack://extension-zerxz-lib/./node_modules/@lit-labs/signals/index.js","webpack://extension-zerxz-lib/./node_modules/lit-html/directives/style-map.js","webpack://extension-zerxz-lib/external module \"../../../../../scripts/extensions.js\"","webpack://extension-zerxz-lib/./src/utils/extension.ts","webpack://extension-zerxz-lib/./src/utils/setting.ts","webpack://extension-zerxz-lib/./src/layouts/HtmlInjector.ts","webpack://extension-zerxz-lib/./node_modules/lit-html/directives/class-map.js","webpack://extension-zerxz-lib/./src/layouts/ExtensionContainer.ts","webpack://extension-zerxz-lib/./src/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var x = (y) => {\n\tvar x = {}; __webpack_require__.d(x, y); return x\n} \nvar y = (x) => (() => (x))\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({ [\"eventSource\"]: () => (__WEBPACK_EXTERNAL_MODULE__script_js_588e7203__.eventSource), [\"event_types\"]: () => (__WEBPACK_EXTERNAL_MODULE__script_js_588e7203__.event_types), [\"getRequestHeaders\"]: () => (__WEBPACK_EXTERNAL_MODULE__script_js_588e7203__.getRequestHeaders), [\"saveSettingsDebounced\"]: () => (__WEBPACK_EXTERNAL_MODULE__script_js_588e7203__.saveSettingsDebounced) });","var x = (y) => {\n\tvar x = {}; __webpack_require__.d(x, y); return x\n} \nvar y = (x) => (() => (x))\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({ [\"oai_settings\"]: () => (__WEBPACK_EXTERNAL_MODULE__scripts_openai_js_991751fb__.oai_settings) });","var x = (y) => {\n\tvar x = {}; __webpack_require__.d(x, y); return x\n} \nvar y = (x) => (() => (x))\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({ [\"POPUP_TYPE\"]: () => (__WEBPACK_EXTERNAL_MODULE__scripts_popup_js_d782a329__.POPUP_TYPE), [\"callGenericPopup\"]: () => (__WEBPACK_EXTERNAL_MODULE__scripts_popup_js_d782a329__.callGenericPopup) });","export const CUSTOM_KEY = \"api_key_makersuite_custom\";\r\nconst switchState = localStorage.getItem(\"switch_key_maker_suite\") === \"true\";\r\nconst throwGeminiErrorState = localStorage.getItem(\"throw_gemini_error\") !== \"true\";\r\n\r\nexport const STATE = {\r\n    switchState,\r\n    throwGeminiErrorState\r\n}\r\n","var x = (y) => {\n\tvar x = {}; __webpack_require__.d(x, y); return x\n} \nvar y = (x) => (() => (x))\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({ [\"updateSecretDisplay\"]: () => (__WEBPACK_EXTERNAL_MODULE__scripts_secrets_js_e26d24e7__.updateSecretDisplay), [\"writeSecret\"]: () => (__WEBPACK_EXTERNAL_MODULE__scripts_secrets_js_e26d24e7__.writeSecret) });","import { callGenericPopup, POPUP_TYPE } from \"@silly-tavern/scripts/popup.js\";\r\nimport {\r\n    saveSettingsDebounced,\r\n    getRequestHeaders,\r\n} from \"@silly-tavern/script.js\";\r\nimport { STATE, CUSTOM_KEY } from \"./constants\";\r\nimport {\r\n    updateSecretDisplay,\r\n    writeSecret,\r\n} from \"@silly-tavern/scripts/secrets.js\";\r\n\r\n\r\nexport async function getSecrets() {\r\n    const response = await fetch(\"/api/secrets/view\", {\r\n        method: \"POST\",\r\n        headers: getRequestHeaders(),\r\n    });\r\n\r\n    if (response.status === 403) {\r\n        callGenericPopup(\r\n            \"<h3>Access Forbidden</h3><p>To view your API key here, set the value of allowKeysExposure to true in the config.yaml file and restart the SillyTavern server.</p>\",\r\n            POPUP_TYPE.TEXT\r\n        );\r\n        return;\r\n    }\r\n\r\n    if (!response.ok) {\r\n        return;\r\n    }\r\n\r\n    // $(\"#dialogue_popup\").addClass(\"wide_dialogue_popup\");\r\n    const data = (await response.json()) as Record<string, string>;\r\n    // console.log(\"data\", data);\r\n    return data;\r\n}\r\n\r\nexport async function switchSecretsFromArray() {\r\n    const secrets = await getSecrets();\r\n    if (!secrets) {\r\n        return;\r\n    }\r\n    if (!STATE.switchState) {\r\n        return;\r\n    }\r\n    const api_key = secrets[CUSTOM_KEY] ?? \"\";\r\n    const api_keys = api_key\r\n        .split(/[\\n;]/)\r\n        .map((v) => v.trim())\r\n        .filter((v) => v.startsWith(\"AIzaSy\"));\r\n    if (api_keys.length <= 1) {\r\n        return;\r\n    }\r\n    const currentKey = secrets.api_key_makersuite;\r\n    let firstKeyApi = \"\";\r\n    if (api_keys.includes(currentKey)) {\r\n        api_keys.splice(api_keys.indexOf(currentKey), 1);\r\n        api_keys.push(currentKey);\r\n    }\r\n    firstKeyApi = api_keys[0];\r\n    writeSecret(\"api_key_makersuite\", firstKeyApi);\r\n    saveKey(CUSTOM_KEY, api_keys.join(\"\\n\"));\r\n    const textarea = $(\"#api_key_makersuite_custom\")[0] as HTMLTextAreaElement;\r\n\r\n    const currentKeyElement = $(\"#current_key_maker_suite\")[0] as HTMLSpanElement;\r\n    const lastKeyElement = $(\"#last_key_maker_suite\")[0] as HTMLSpanElement;\r\n    console.log(\"textarea\", textarea);\r\n    console.log(\"api_keys\", api_keys);\r\n    if (!textarea) {\r\n        return;\r\n    }\r\n    currentKeyElement.textContent = `Current Key: ${firstKeyApi}`;\r\n    lastKeyElement.textContent = `Last Key: ${currentKey}`;\r\n\r\n    textarea.value = api_keys.join(\"\\n\");\r\n}\r\n\r\n\r\nexport async function saveKey(key: string, value: string, isUpdateSecretDisplay = true) {\r\n    // Set the key\r\n    await writeSecret(key, value);\r\n    // Update secret display\r\n    if (isUpdateSecretDisplay) {\r\n        updateSecretDisplay();\r\n    }\r\n    updateSecretDisplay();\r\n    // Save settings\r\n    saveSettingsDebounced();\r\n}\r\n","import { oai_settings } from \"@silly-tavern/scripts/openai.js\";\r\nimport { callGenericPopup, POPUP_TYPE } from \"@silly-tavern/scripts/popup.js\";\r\nimport { saveKey } from \"./utils\";\r\n\r\ninterface GeminiModel {\r\n\tdescription: string;\r\n\tdisplayName: string;\r\n\tinputTokenLimit: number;\r\n\tmaxTemperature: number;\r\n\tname: string;\r\n\toutputTokenLimit: number;\r\n\tsupportedGenerationMethods: string[];\r\n\ttemperature: number;\r\n\ttopK: number;\r\n\ttopP: number;\r\n\tversion: string;\r\n}\r\n\r\ninterface GeminiResponse {\r\n\tmodels: GeminiModel[];\r\n}\r\n\r\ninterface Model {\r\n\tname: string;\r\n\tmodel: string;\r\n}\r\n\r\nexport async function getGeminiModel(key: string) {\r\n\ttry {\r\n\t\tconst result = await fetch(\r\n\t\t\t`https://generativelanguage.googleapis.com/v1beta/models/?key=${key}`,\r\n\t\t);\r\n\t\tconst data = (await result.json()) as GeminiResponse;\r\n\t\tif (!data?.models) {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t\tconsole.log(data);\r\n\t\treturn data.models\r\n\t\t\t.filter((model) => model.name.includes(\"gemini\"))\r\n\t\t\t.map((modelData) => {\r\n\t\t\t\tconst model = modelData.name.replace(\"models/\", \"\");\r\n\t\t\t\tconst name = modelData.displayName;\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname,\r\n\t\t\t\t\tmodel,\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t} catch (e) {\r\n\t\tconsole.error(e);\r\n\t\treturn [];\r\n\t}\r\n}\r\n\r\nexport const GEMINI_SOURCES = [\"makersuite\", \"aistudio\"];\r\n\r\nexport const isGeminiSource = () =>\r\n\tGEMINI_SOURCES.includes(oai_settings.chat_completion_source);\r\n\r\nexport function throwGeminiError(text = \"\") {\r\n\r\n\tcallGenericPopup(`\r\n\t\t\t\t${text}\r\n\t\t\t\t<table class=\"responsiveTable\">\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>Error Code</th>\r\n\t\t\t\t\t\t\t<th>Reason or Solution</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>429/Resource has been exhausted</td>\r\n\t\t\t\t\t\t\t<td>Hit the rate limit, please wait a moment. If this error still appears, please adjust the maximum context to below 50k.</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>Internal Server Error</td>\r\n\t\t\t\t\t\t\t<td>If encountered on mobile, switch to Clash. Do not use third-party proxy software like **VPN** or accelerators. PC users should enable service mode and TUN mode. If this error still occurs, check if the reverse proxy address is empty. If there is an address, delete it.</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>User location is not supported for the API use.</td>\r\n\t\t\t\t\t\t\t<td>The node is in a restricted country, please change the node (USA is the highest priority, please do not choose regions like Europe, Hong Kong, Russia, etc.)</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>Too Many Requests</td>\r\n\t\t\t\t\t\t\t<td>Refreshed too frequently, wait one minute. If ineffective, the daily request limit has been reached.</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>Bad request</td>\r\n\t\t\t\t\t\t\t<td>Network environment error or API is dead (account or project banned)</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>API key expired. Please renew the API key</td>\r\n\t\t\t\t\t\t\t<td>API key has expired or been deleted</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>The model is overloaded. Please try later</td>\r\n\t\t\t\t\t\t\t<td>This model is temporarily closed for fine-tuning, temporarily unavailable. Please switch to another model or wait for a period of time.</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>Please use a valid role: user, model.</td>\r\n\t\t\t\t\t\t\t<td>You are using a preset that requires patching. Please switch to a preset that does not require patching or apply the patch.</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>User location is not supported for the API use without a billing account linked.</td>\r\n\t\t\t\t\t\t\t<td>Located in a region restricted for the free tier by Google policy (e.g., UK, Italy)</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>API key not valid. Please pass a valid API key</td>\r\n\t\t\t\t\t\t\t<td>API returned an error, check if the API is available</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>Permission denied: Consumer has been suspended.</td>\r\n\t\t\t\t\t\t\t<td>Google account banned</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>MakerSuite API returned no candidate</td>\r\n\t\t\t\t\t\t\t<td>Prompt was blocked due to : OTHER. This output was truncated, please turn off streaming.</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>Not Found</td>\r\n\t\t\t\t\t\t\t<td>Incorrect model selection, please do not select models outside the Gemini series or Gemini Ultra.</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>MakerSuite Candidate text empty</td>\r\n\t\t\t\t\t\t\t<td>Still truncated. There are many solutions: close some global world books / change input content / update to a newer version of the preset.</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<td>403/Forbidden</td>\r\n\t\t\t\t\t\t\t<td>Account or project banned, API key cannot be called.</td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t`, POPUP_TYPE.TEXT, \"\", {\r\n\t\tlarge: true,\r\n\t\twide: true,\r\n\t\tallowVerticalScrolling: true,\r\n\t});\r\n}\r\n\r\nexport async function initGeminiModels(secrets: Record<string, string> = {}) {\r\n\tif (!secrets) {\r\n\t\treturn;\r\n\t}\r\n\tconst modelStr = JSON.parse(secrets.models_makersuite ?? \"[]\") as Model[];\r\n\tconst api_key = secrets.api_key_makersuite ?? \"\";\r\n\tconsole.log(\"ZerxzLib init\"); // Keeping this as it might be a specific library name\r\n\tconst optgroup = $(\"#model_google_select > optgroup\");\r\n\tconsole.log(\"optgroup\", optgroup);\r\n\tconst primaryVersions = optgroup[0];\r\n\tconst subVersions = optgroup[1];\r\n\tconsole.log(\"subVersions\", subVersions);\r\n\tconst subVersionsArray = Array.from(\r\n\t\tsubVersions.children,\r\n\t) as HTMLOptionElement[];\r\n\tconst primaryVersionsArray = Array.from(\r\n\t\tprimaryVersions.children,\r\n\t) as HTMLOptionElement[];\r\n\tconsole.log(\"subVersionsArray\", subVersionsArray);\r\n\tconst subVersionsValues = subVersionsArray.map((el) => el.value);\r\n\tconst primaryVersionsValues = primaryVersionsArray.map((el) => el.value);\r\n\tconst originalVersions = [\r\n\t\t...primaryVersionsValues,\r\n\t\t...subVersionsValues,\r\n\t].flat();\r\n\tconst cachedVersions = modelStr.map((model) => model.model);\r\n\t// Check if it's the first load\r\n\tif (modelStr.length > 0) {\r\n\t\tfor (const model of modelStr) {\r\n\t\t\tif (originalVersions.includes(model.model)) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tconst option = document.createElement(\"option\");\r\n\t\t\toption.value = model.model;\r\n\t\t\toption.text = `${model.name}(${model.model})`;\r\n\t\t\tsubVersions.appendChild(option);\r\n\t\t}\r\n\t}\r\n\tconst geminiModels = await getGeminiModel(api_key);\r\n\tconsole.log(\"geminiModels\", geminiModels);\r\n\tconst geminiModelOptions = geminiModels.filter(\r\n\t\t(model) =>\r\n\t\t\t!originalVersions.includes(model.model) &&\r\n\t\t\t!cachedVersions.includes(model.model),\r\n\t);\r\n\r\n\tif (geminiModelOptions.length === 0) {\r\n\t\tconsole.log(\"No new models\");\r\n\t} else {\r\n\t\tconsole.log(\"geminiModelOptions\", geminiModelOptions);\r\n\t\tfor (const model of geminiModelOptions) {\r\n\t\t\tconst option = document.createElement(\"option\");\r\n\t\t\toption.value = model.model;\r\n\t\t\toption.text = `${model.name}(${model.model})`;\r\n\t\t\tsubVersions.appendChild(option);\r\n\t\t}\r\n\t\tsaveKey(\"models_makersuite\", JSON.stringify(geminiModelOptions));\r\n\t}\r\n\tconst uniqueModels = new Set([...originalVersions, ...cachedVersions, ...geminiModelOptions.map((model) => model.model)]);\r\n\tif (isGeminiSource() && !!secrets.api_key_makersuite_model) {\r\n\t\tif (!uniqueModels.has(secrets.api_key_makersuite_model)) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\toai_settings.google_model = secrets.api_key_makersuite_model;\r\n\t\t$('#model_google_select').val(oai_settings.google_model);\r\n\t\t$(`#model_google_select option[value=\"${oai_settings.google_model}\"`)\r\n\t\t\t// @ts-ignore\r\n\t\t\t.attr('selected', true);\r\n\t}\r\n\r\n}\r\n","import { STATE } from \"./constants\";\r\nimport { isGeminiSource, throwGeminiError } from \"./gemini\";\r\n\r\n// @ts-ignore\r\nconst oldError = toastr.error;\r\nexport function initToastr() {\r\n    // @ts-ignore\r\n    toastr.error = (/** @type { any[]} */ ...args) => {\r\n        oldError(...args);\r\n        console.log(args);\r\n        console.error(...args);\r\n        if (!isGeminiSource() || !STATE.throwGeminiErrorState) {\r\n            return;\r\n        }\r\n        const [message, type] = args;\r\n\r\n        if (!type) {\r\n            return;\r\n        }\r\n        if (type === \"Chat Completion API\") {\r\n            const lastKeyElement = $(\"#last_key_maker_suite\")[0] as HTMLSpanElement;\r\n            throwGeminiError(`<h3>Chat Completion API 错误</h3>\r\n\t\t\t\t<p>${message}</p>\r\n\t\t\t\t<p> ${lastKeyElement.textContent}</p>`);\r\n        }\r\n    };\r\n}\r\n","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=globalThis,e=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&\"adoptedStyleSheets\"in Document.prototype&&\"replace\"in CSSStyleSheet.prototype,s=Symbol(),o=new WeakMap;class n{constructor(t,e,o){if(this._$cssResult$=!0,o!==s)throw Error(\"CSSResult is not constructable. Use `unsafeCSS` or `css` instead.\");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const s=this.t;if(e&&void 0===t){const e=void 0!==s&&1===s.length;e&&(t=o.get(s)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),e&&o.set(s,t))}return t}toString(){return this.cssText}}const r=t=>new n(\"string\"==typeof t?t:t+\"\",void 0,s),i=(t,...e)=>{const o=1===t.length?t[0]:e.reduce(((e,s,o)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if(\"number\"==typeof t)return t;throw Error(\"Value passed to 'css' function must be a 'css' function result: \"+t+\". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.\")})(s)+t[o+1]),t[0]);return new n(o,t,s)},S=(s,o)=>{if(e)s.adoptedStyleSheets=o.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const e of o){const o=document.createElement(\"style\"),n=t.litNonce;void 0!==n&&o.setAttribute(\"nonce\",n),o.textContent=e.cssText,s.appendChild(o)}},c=e?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e=\"\";for(const s of t.cssRules)e+=s.cssText;return r(e)})(t):t;export{n as CSSResult,S as adoptStyles,i as css,c as getCompatibleStyle,e as supportsAdoptingStyleSheets,r as unsafeCSS};\n//# sourceMappingURL=css-tag.js.map\n","import{getCompatibleStyle as t,adoptStyles as s}from\"./css-tag.js\";export{CSSResult,adoptStyles,css,getCompatibleStyle,supportsAdoptingStyleSheets,unsafeCSS}from\"./css-tag.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const{is:i,defineProperty:e,getOwnPropertyDescriptor:r,getOwnPropertyNames:h,getOwnPropertySymbols:o,getPrototypeOf:n}=Object,a=globalThis,c=a.trustedTypes,l=c?c.emptyScript:\"\",p=a.reactiveElementPolyfillSupport,d=(t,s)=>t,u={toAttribute(t,s){switch(s){case Boolean:t=t?l:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,s){let i=t;switch(s){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},f=(t,s)=>!i(t,s),y={attribute:!0,type:String,converter:u,reflect:!1,hasChanged:f};Symbol.metadata??=Symbol(\"metadata\"),a.litPropertyMetadata??=new WeakMap;class b extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,s=y){if(s.state&&(s.attribute=!1),this._$Ei(),this.elementProperties.set(t,s),!s.noAccessor){const i=Symbol(),r=this.getPropertyDescriptor(t,i,s);void 0!==r&&e(this.prototype,t,r)}}static getPropertyDescriptor(t,s,i){const{get:e,set:h}=r(this.prototype,t)??{get(){return this[s]},set(t){this[s]=t}};return{get(){return e?.call(this)},set(s){const r=e?.call(this);h.call(this,s),this.requestUpdate(t,r,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??y}static _$Ei(){if(this.hasOwnProperty(d(\"elementProperties\")))return;const t=n(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(d(\"finalized\")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(d(\"properties\"))){const t=this.properties,s=[...h(t),...o(t)];for(const i of s)this.createProperty(i,t[i])}const t=this[Symbol.metadata];if(null!==t){const s=litPropertyMetadata.get(t);if(void 0!==s)for(const[t,i]of s)this.elementProperties.set(t,i)}this._$Eh=new Map;for(const[t,s]of this.elementProperties){const i=this._$Eu(t,s);void 0!==i&&this._$Eh.set(i,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(s){const i=[];if(Array.isArray(s)){const e=new Set(s.flat(1/0).reverse());for(const s of e)i.unshift(t(s))}else void 0!==s&&i.push(t(s));return i}static _$Eu(t,s){const i=s.attribute;return!1===i?void 0:\"string\"==typeof i?i:\"string\"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,s=this.constructor.elementProperties;for(const i of s.keys())this.hasOwnProperty(i)&&(t.set(i,this[i]),delete this[i]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return s(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((t=>t.hostConnected?.()))}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach((t=>t.hostDisconnected?.()))}attributeChangedCallback(t,s,i){this._$AK(t,i)}_$EC(t,s){const i=this.constructor.elementProperties.get(t),e=this.constructor._$Eu(t,i);if(void 0!==e&&!0===i.reflect){const r=(void 0!==i.converter?.toAttribute?i.converter:u).toAttribute(s,i.type);this._$Em=t,null==r?this.removeAttribute(e):this.setAttribute(e,r),this._$Em=null}}_$AK(t,s){const i=this.constructor,e=i._$Eh.get(t);if(void 0!==e&&this._$Em!==e){const t=i.getPropertyOptions(e),r=\"function\"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:u;this._$Em=e,this[e]=r.fromAttribute(s,t.type),this._$Em=null}}requestUpdate(t,s,i){if(void 0!==t){if(i??=this.constructor.getPropertyOptions(t),!(i.hasChanged??f)(this[t],s))return;this.P(t,s,i)}!1===this.isUpdatePending&&(this._$ES=this._$ET())}P(t,s,i){this._$AL.has(t)||this._$AL.set(t,s),!0===i.reflect&&this._$Em!==t&&(this._$Ej??=new Set).add(t)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,s]of this._$Ep)this[t]=s;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[s,i]of t)!0!==i.wrapped||this._$AL.has(s)||void 0===this[s]||this.P(s,this[s],i)}let t=!1;const s=this._$AL;try{t=this.shouldUpdate(s),t?(this.willUpdate(s),this._$EO?.forEach((t=>t.hostUpdate?.())),this.update(s)):this._$EU()}catch(s){throw t=!1,this._$EU(),s}t&&this._$AE(s)}willUpdate(t){}_$AE(t){this._$EO?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Ej&&=this._$Ej.forEach((t=>this._$EC(t,this[t]))),this._$EU()}updated(t){}firstUpdated(t){}}b.elementStyles=[],b.shadowRootOptions={mode:\"open\"},b[d(\"elementProperties\")]=new Map,b[d(\"finalized\")]=new Map,p?.({ReactiveElement:b}),(a.reactiveElementVersions??=[]).push(\"2.0.4\");export{b as ReactiveElement,u as defaultConverter,f as notEqual};\n//# sourceMappingURL=reactive-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t=globalThis,i=t.trustedTypes,s=i?i.createPolicy(\"lit-html\",{createHTML:t=>t}):void 0,e=\"$lit$\",h=`lit$${Math.random().toFixed(9).slice(2)}$`,o=\"?\"+h,n=`<${o}>`,r=document,l=()=>r.createComment(\"\"),c=t=>null===t||\"object\"!=typeof t&&\"function\"!=typeof t,a=Array.isArray,u=t=>a(t)||\"function\"==typeof t?.[Symbol.iterator],d=\"[ \\t\\n\\f\\r]\",f=/<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g,v=/-->/g,_=/>/g,m=RegExp(`>|${d}(?:([^\\\\s\"'>=/]+)(${d}*=${d}*(?:[^ \\t\\n\\f\\r\"'\\`<>=]|(\"|')|))|$)`,\"g\"),p=/'/g,g=/\"/g,$=/^(?:script|style|textarea|title)$/i,y=t=>(i,...s)=>({_$litType$:t,strings:i,values:s}),x=y(1),b=y(2),w=y(3),T=Symbol.for(\"lit-noChange\"),E=Symbol.for(\"lit-nothing\"),A=new WeakMap,C=r.createTreeWalker(r,129);function P(t,i){if(!a(t)||!t.hasOwnProperty(\"raw\"))throw Error(\"invalid template strings array\");return void 0!==s?s.createHTML(i):i}const V=(t,i)=>{const s=t.length-1,o=[];let r,l=2===i?\"<svg>\":3===i?\"<math>\":\"\",c=f;for(let i=0;i<s;i++){const s=t[i];let a,u,d=-1,y=0;for(;y<s.length&&(c.lastIndex=y,u=c.exec(s),null!==u);)y=c.lastIndex,c===f?\"!--\"===u[1]?c=v:void 0!==u[1]?c=_:void 0!==u[2]?($.test(u[2])&&(r=RegExp(\"</\"+u[2],\"g\")),c=m):void 0!==u[3]&&(c=m):c===m?\">\"===u[0]?(c=r??f,d=-1):void 0===u[1]?d=-2:(d=c.lastIndex-u[2].length,a=u[1],c=void 0===u[3]?m:'\"'===u[3]?g:p):c===g||c===p?c=m:c===v||c===_?c=f:(c=m,r=void 0);const x=c===m&&t[i+1].startsWith(\"/>\")?\" \":\"\";l+=c===f?s+n:d>=0?(o.push(a),s.slice(0,d)+e+s.slice(d)+h+x):s+h+(-2===d?i:x)}return[P(t,l+(t[s]||\"<?>\")+(2===i?\"</svg>\":3===i?\"</math>\":\"\")),o]};class N{constructor({strings:t,_$litType$:s},n){let r;this.parts=[];let c=0,a=0;const u=t.length-1,d=this.parts,[f,v]=V(t,s);if(this.el=N.createElement(f,n),C.currentNode=this.el.content,2===s||3===s){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(r=C.nextNode())&&d.length<u;){if(1===r.nodeType){if(r.hasAttributes())for(const t of r.getAttributeNames())if(t.endsWith(e)){const i=v[a++],s=r.getAttribute(t).split(h),e=/([.?@])?(.*)/.exec(i);d.push({type:1,index:c,name:e[2],strings:s,ctor:\".\"===e[1]?H:\"?\"===e[1]?I:\"@\"===e[1]?L:k}),r.removeAttribute(t)}else t.startsWith(h)&&(d.push({type:6,index:c}),r.removeAttribute(t));if($.test(r.tagName)){const t=r.textContent.split(h),s=t.length-1;if(s>0){r.textContent=i?i.emptyScript:\"\";for(let i=0;i<s;i++)r.append(t[i],l()),C.nextNode(),d.push({type:2,index:++c});r.append(t[s],l())}}}else if(8===r.nodeType)if(r.data===o)d.push({type:2,index:c});else{let t=-1;for(;-1!==(t=r.data.indexOf(h,t+1));)d.push({type:7,index:c}),t+=h.length-1}c++}}static createElement(t,i){const s=r.createElement(\"template\");return s.innerHTML=t,s}}function S(t,i,s=t,e){if(i===T)return i;let h=void 0!==e?s._$Co?.[e]:s._$Cl;const o=c(i)?void 0:i._$litDirective$;return h?.constructor!==o&&(h?._$AO?.(!1),void 0===o?h=void 0:(h=new o(t),h._$AT(t,s,e)),void 0!==e?(s._$Co??=[])[e]=h:s._$Cl=h),void 0!==h&&(i=S(t,h._$AS(t,i.values),h,e)),i}class M{constructor(t,i){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=i}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:i},parts:s}=this._$AD,e=(t?.creationScope??r).importNode(i,!0);C.currentNode=e;let h=C.nextNode(),o=0,n=0,l=s[0];for(;void 0!==l;){if(o===l.index){let i;2===l.type?i=new R(h,h.nextSibling,this,t):1===l.type?i=new l.ctor(h,l.name,l.strings,this,t):6===l.type&&(i=new z(h,this,t)),this._$AV.push(i),l=s[++n]}o!==l?.index&&(h=C.nextNode(),o++)}return C.currentNode=r,e}p(t){let i=0;for(const s of this._$AV)void 0!==s&&(void 0!==s.strings?(s._$AI(t,s,i),i+=s.strings.length-2):s._$AI(t[i])),i++}}class R{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,i,s,e){this.type=2,this._$AH=E,this._$AN=void 0,this._$AA=t,this._$AB=i,this._$AM=s,this.options=e,this._$Cv=e?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const i=this._$AM;return void 0!==i&&11===t?.nodeType&&(t=i.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,i=this){t=S(this,t,i),c(t)?t===E||null==t||\"\"===t?(this._$AH!==E&&this._$AR(),this._$AH=E):t!==this._$AH&&t!==T&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):u(t)?this.k(t):this._(t)}O(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}_(t){this._$AH!==E&&c(this._$AH)?this._$AA.nextSibling.data=t:this.T(r.createTextNode(t)),this._$AH=t}$(t){const{values:i,_$litType$:s}=t,e=\"number\"==typeof s?this._$AC(t):(void 0===s.el&&(s.el=N.createElement(P(s.h,s.h[0]),this.options)),s);if(this._$AH?._$AD===e)this._$AH.p(i);else{const t=new M(e,this),s=t.u(this.options);t.p(i),this.T(s),this._$AH=t}}_$AC(t){let i=A.get(t.strings);return void 0===i&&A.set(t.strings,i=new N(t)),i}k(t){a(this._$AH)||(this._$AH=[],this._$AR());const i=this._$AH;let s,e=0;for(const h of t)e===i.length?i.push(s=new R(this.O(l()),this.O(l()),this,this.options)):s=i[e],s._$AI(h),e++;e<i.length&&(this._$AR(s&&s._$AB.nextSibling,e),i.length=e)}_$AR(t=this._$AA.nextSibling,i){for(this._$AP?.(!1,!0,i);t&&t!==this._$AB;){const i=t.nextSibling;t.remove(),t=i}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class k{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,i,s,e,h){this.type=1,this._$AH=E,this._$AN=void 0,this.element=t,this.name=i,this._$AM=e,this.options=h,s.length>2||\"\"!==s[0]||\"\"!==s[1]?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=E}_$AI(t,i=this,s,e){const h=this.strings;let o=!1;if(void 0===h)t=S(this,t,i,0),o=!c(t)||t!==this._$AH&&t!==T,o&&(this._$AH=t);else{const e=t;let n,r;for(t=h[0],n=0;n<h.length-1;n++)r=S(this,e[s+n],i,n),r===T&&(r=this._$AH[n]),o||=!c(r)||r!==this._$AH[n],r===E?t=E:t!==E&&(t+=(r??\"\")+h[n+1]),this._$AH[n]=r}o&&!e&&this.j(t)}j(t){t===E?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??\"\")}}class H extends k{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===E?void 0:t}}class I extends k{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==E)}}class L extends k{constructor(t,i,s,e,h){super(t,i,s,e,h),this.type=5}_$AI(t,i=this){if((t=S(this,t,i,0)??E)===T)return;const s=this._$AH,e=t===E&&s!==E||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,h=t!==E&&(s===E||e);e&&this.element.removeEventListener(this.name,this,s),h&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){\"function\"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class z{constructor(t,i,s){this.element=t,this.type=6,this._$AN=void 0,this._$AM=i,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(t){S(this,t)}}const Z={M:e,P:h,A:o,C:1,L:V,R:M,D:u,V:S,I:R,H:k,N:I,U:L,B:H,F:z},j=t.litHtmlPolyfillSupport;j?.(N,R),(t.litHtmlVersions??=[]).push(\"3.2.1\");const B=(t,i,s)=>{const e=s?.renderBefore??i;let h=e._$litPart$;if(void 0===h){const t=s?.renderBefore??null;e._$litPart$=h=new R(i.insertBefore(l(),t),t,void 0,s??{})}return h._$AI(t),h};export{Z as _$LH,x as html,w as mathml,T as noChange,E as nothing,B as render,b as svg};\n//# sourceMappingURL=lit-html.js.map\n","import{ReactiveElement as t}from\"@lit/reactive-element\";export*from\"@lit/reactive-element\";import{render as e,noChange as s}from\"lit-html\";export*from\"lit-html\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */class r extends t{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const s=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=e(s,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return s}}r._$litElement$=!0,r[\"finalized\"]=!0,globalThis.litElementHydrateSupport?.({LitElement:r});const i=globalThis.litElementPolyfillSupport;i?.({LitElement:r});const o={_$AK:(t,e,s)=>{t._$AK(e,s)},_$AL:t=>t._$AL};(globalThis.litElementVersions??=[]).push(\"4.1.1\");export{r as LitElement,o as _$LE};\n//# sourceMappingURL=lit-element.js.map\n","/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst t={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},e=t=>(...e)=>({_$litDirective$:t,values:e});class i{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,i){this._$Ct=t,this._$AM=e,this._$Ci=i}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}export{i as Directive,t as PartType,e as directive};\n//# sourceMappingURL=directive.js.map\n","import{_$LH as o}from\"./lit-html.js\";\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const{I:t}=o,i=o=>null===o||\"object\"!=typeof o&&\"function\"!=typeof o,n={HTML:1,SVG:2,MATHML:3},e=(o,t)=>void 0===t?void 0!==o?._$litType$:o?._$litType$===t,l=o=>null!=o?._$litType$?.h,c=o=>void 0!==o?._$litDirective$,d=o=>o?._$litDirective$,f=o=>void 0===o.strings,s=()=>document.createComment(\"\"),r=(o,i,n)=>{const e=o._$AA.parentNode,l=void 0===i?o._$AB:i._$AA;if(void 0===n){const i=e.insertBefore(s(),l),c=e.insertBefore(s(),l);n=new t(i,c,o,o.options)}else{const t=n._$AB.nextSibling,i=n._$AM,c=i!==o;if(c){let t;n._$AQ?.(o),n._$AM=o,void 0!==n._$AP&&(t=o._$AU)!==i._$AU&&n._$AP(t)}if(t!==l||c){let o=n._$AA;for(;o!==t;){const t=o.nextSibling;e.insertBefore(o,l),o=t}}}return n},v=(o,t,i=o)=>(o._$AI(t,i),o),u={},m=(o,t=u)=>o._$AH=t,p=o=>o._$AH,M=o=>{o._$AP?.(!1,!0);let t=o._$AA;const i=o._$AB.nextSibling;for(;t!==i;){const o=t.nextSibling;t.remove(),t=o}},h=o=>{o._$AR()};export{n as TemplateResultType,h as clearPart,p as getCommittedValue,d as getDirectiveClass,r as insertPart,l as isCompiledTemplateResult,c as isDirectiveResult,i as isPrimitive,f as isSingleExpression,e as isTemplateResult,M as removePart,v as setChildPartValue,m as setCommittedValue};\n//# sourceMappingURL=directive-helpers.js.map\n","import{noChange as e}from\"../lit-html.js\";import{directive as s,Directive as t,PartType as r}from\"../directive.js\";import{getCommittedValue as l,setChildPartValue as o,insertPart as i,removePart as n,setCommittedValue as f}from\"../directive-helpers.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */\nconst u=(e,s,t)=>{const r=new Map;for(let l=s;l<=t;l++)r.set(e[l],l);return r},c=s(class extends t{constructor(e){if(super(e),e.type!==r.CHILD)throw Error(\"repeat() can only be used in text expressions\")}dt(e,s,t){let r;void 0===t?t=s:void 0!==s&&(r=s);const l=[],o=[];let i=0;for(const s of e)l[i]=r?r(s,i):i,o[i]=t(s,i),i++;return{values:o,keys:l}}render(e,s,t){return this.dt(e,s,t).values}update(s,[t,r,c]){const d=l(s),{values:p,keys:a}=this.dt(t,r,c);if(!Array.isArray(d))return this.ut=a,p;const h=this.ut??=[],v=[];let m,y,x=0,j=d.length-1,k=0,w=p.length-1;for(;x<=j&&k<=w;)if(null===d[x])x++;else if(null===d[j])j--;else if(h[x]===a[k])v[k]=o(d[x],p[k]),x++,k++;else if(h[j]===a[w])v[w]=o(d[j],p[w]),j--,w--;else if(h[x]===a[w])v[w]=o(d[x],p[w]),i(s,v[w+1],d[x]),x++,w--;else if(h[j]===a[k])v[k]=o(d[j],p[k]),i(s,d[x],d[j]),j--,k++;else if(void 0===m&&(m=u(a,k,w),y=u(h,x,j)),m.has(h[x]))if(m.has(h[j])){const e=y.get(a[k]),t=void 0!==e?d[e]:null;if(null===t){const e=i(s,d[x]);o(e,p[k]),v[k]=e}else v[k]=o(t,p[k]),i(s,d[x],t),d[e]=null;k++}else n(d[j]),j--;else n(d[x]),x++;for(;k<=w;){const e=i(s,v[w+1]);o(e,p[k]),v[k++]=e}for(;x<=j;){const e=d[x++];null!==e&&n(e)}return this.ut=a,f(s,v),e}});export{c as repeat};\n//# sourceMappingURL=repeat.js.map\n","import { LitElement, css, html } from 'lit';\r\nimport { repeat } from 'lit/directives/repeat.js';\r\nimport { CUSTOM_KEY, getSecrets, initGeminiModels, saveKey, STATE, throwGeminiError, } from '../utils';\r\nimport {\r\n    writeSecret,\r\n} from \"@silly-tavern/scripts/secrets.js\";\r\n\r\ninterface GeminiLayoutsOption {\r\n    currentKey: string;\r\n    lastKey: string;\r\n    throwGeminiErrorState: boolean;\r\n    switchKeyMakerSuite: boolean;\r\n    apiKeys: string;\r\n}\r\n\r\n// Commented out original HTML structure for reference\r\n// `\r\n// <div class=\"menu_button menu_button_icon interactable\" title=\"保存密钥\" @click=\"${this.handleSaveKey}\"><span>保存密钥</span></div>\r\n//             <div class=\"menu_button menu_button_icon interactable\" title=\"获取新的模型\" @click=\"${this.handleGetNewModel}\"><span>获取新的模型</span></div>\r\n//             <div class=\"menu_button menu_button_icon interactable\" title=\"切换密钥设置\" @click=\"${this.handleSwitchKeyMakerSuite}\"><span>切换密钥设置</span></div>\r\n//             <div class=\"menu_button menu_button_icon interactable\" title=\"查看报错原因\" @click=\"${this.handleThrowGeminiError}\"><span>查看报错原因</span></div>\r\n//             <div class=\"menu_button menu_button_icon interactable\" title=\"报错开关\" @click=\"${this.handleSwitchGeminiError}\"><span>报错开关</span></div>\r\n// `\r\n\r\nclass GeminiLayouts extends LitElement {\r\n    // Define properties for the component\r\n    static properties = {\r\n        currentKey: { type: String, reflect: true },\r\n        lastKey: { type: String, reflect: true },\r\n        throwGeminiErrorState: { type: Boolean, reflect: true },\r\n        switchKeyMakerSuite: { type: Boolean, reflect: true },\r\n        apiKeys: { type: String, reflect: true },\r\n    }\r\n\r\n    // Declare properties with their types\r\n    declare currentKey: string;\r\n    declare lastKey: string;\r\n    declare throwGeminiErrorState: boolean;\r\n    declare switchKeyMakerSuite: boolean;\r\n    declare apiKeys: string;\r\n\r\n    // Constructor to initialize properties\r\n    constructor() {\r\n        super();\r\n        this.currentKey = \"\";\r\n        this.lastKey = \"\";\r\n        this.throwGeminiErrorState = false;\r\n        this.switchKeyMakerSuite = false;\r\n        this.apiKeys = \"\";\r\n    }\r\n\r\n    // Disable shadow DOM\r\n    protected createRenderRoot(): HTMLElement | DocumentFragment {\r\n        return this;\r\n    }\r\n\r\n    // Render method to define the component's template\r\n    render() {\r\n        console.log('GeminiLayouts render');\r\n        console.log(\"this\", this);\r\n\r\n        // Array of button configurations\r\n        const buttons = [\r\n            {\r\n                name: \"Save Key\", // Translated from \"保存密钥\"\r\n                handle: this.handleSaveKey\r\n            },\r\n            {\r\n                name: \"Fetch New Models\", // Translated from \"获取新的模型\"\r\n                handle: this.handleGetNewModel\r\n            },\r\n            {\r\n                name: \"Key Switching Settings\", // Translated from \"切换密钥设置\"\r\n                handle: this.handleSwitchKeyMakerSuite\r\n            },\r\n            {\r\n                name: \"View Error Reasons\", // Translated from \"查看报错原因\"\r\n                handle: this.handleThrowGeminiError\r\n            },\r\n            {\r\n                name: \"Error Reporting Toggle\", // Translated from \"报错开关\"\r\n                handle: this.handleSwitchGeminiError\r\n            }\r\n        ]\r\n\r\n        // HTML template using lit-html\r\n        return html`\r\n        <div>\r\n            <h4>Key Call Information:</h4> <div id=\"current_key_maker_suite\">Current: ${this.currentKey}</div> <div id=\"last_key_maker_suite\">Last: ${this.lastKey}</div> <div id=\"switch_key_maker_suite\">Key Switching:${this.switchKeyMakerSuite ? \"On\" : \"Off\"}</div> <div id=\"throw_gemini_error\">Error Reporting Toggle:${this.throwGeminiErrorState ? \"On\" : \"Off\"}</div> </div>\r\n        <div class=\"flex-container flex\">\r\n            <h4>Google AI Studio API Multiple Keys</h4> <textarea class=\"text_pole textarea_compact autoSetHeight\" placeholder=\"API Key\" id=\"api_key_makersuite_custom\" style=\"height: 100px;\" @change=${this.handleTextareaInput} .value=${this.apiKeys}></textarea>\r\n        </div>\r\n        <div class=\"flex-container flex\">\r\n        ${repeat( // Loop through the buttons array\r\n            buttons,\r\n            ({ name }) => name, // Use name as the key for repeat directive\r\n            ({ name, handle }) => html`\r\n                    <div class=\"menu_button menu_button_icon interactable\" title=\"${name}\" @click=\"${handle}\"><span>${name}</span></div>`,\r\n        )}\r\n        </div>\r\n        <hr>\r\n        `;\r\n    }\r\n\r\n    // Handler for input changes in the textarea\r\n    handleTextareaInput(event: Event) {\r\n        console.log('handleTextareaInput', event);\r\n        const textarea = event.target as HTMLTextAreaElement;\r\n\r\n        // Process the input value: split by newline or semicolon, trim whitespace, filter valid keys\r\n        const value = textarea.value\r\n            .split(/[\\n;]/)\r\n            .map((v) => v.trim())\r\n            .filter((v) => v.length > 0 && v.startsWith(\"AIzaSy\")); // Filter for valid API key format\r\n\r\n        this.apiKeys = value.join(\"\\n\"); // Join valid keys back with newlines\r\n        textarea.value = this.apiKeys; // Update the textarea value\r\n\r\n        // If no valid keys remain, save the empty string and return\r\n        if (value.length === 0) {\r\n            saveKey(CUSTOM_KEY, this.apiKeys);\r\n            return;\r\n        }\r\n\r\n        // Use the first valid key for the main API key setting\r\n        const fistValue = value[0];\r\n        writeSecret(\"api_key_makersuite\", fistValue);\r\n        // Save the full list of keys to custom storage\r\n        saveKey(CUSTOM_KEY, this.apiKeys);\r\n        // this.requestUpdate(); // Optionally request update if needed, commented out in original\r\n    }\r\n\r\n    // Handler for the \"View Error Reasons\" button\r\n    handleThrowGeminiError() {\r\n        console.log('handleThrowGeminiError');\r\n        throwGeminiError(); // Call the function to display Gemini error details\r\n    }\r\n\r\n    // Handler for the \"Fetch New Models\" button\r\n    async handleGetNewModel() {\r\n        console.log('handleGetNewModel');\r\n        const secrets = await getSecrets(); // Fetch secrets\r\n        await initGeminiModels(secrets); // Initialize Gemini models with fetched secrets\r\n    }\r\n\r\n    // Handler for the \"Save Key\" button\r\n    handleSaveKey() {\r\n        console.log('handleSaveKey');\r\n        const value = this.apiKeys; // Get the current value from the apiKeys property\r\n        if (value.length === 0) {\r\n            saveKey(CUSTOM_KEY, value); // Save empty string if no keys\r\n            return;\r\n        }\r\n        const fistValue = value[0]; // Get the first key\r\n        writeSecret(\"api_key_makersuite\", fistValue); // Write the first key to the main setting\r\n        saveKey(CUSTOM_KEY, this.apiKeys); // Save the full list of keys to custom storage\r\n    }\r\n\r\n    // Handler for the \"Key Switching Settings\" button\r\n    handleSwitchKeyMakerSuite() {\r\n        console.log('handleSwitchKeyMakerSuite');\r\n        STATE.switchState = !STATE.switchState; // Toggle the switch state\r\n        localStorage.setItem(\"switch_key_maker_suite\", STATE.switchState.toString()); // Save state to local storage\r\n        this.switchKeyMakerSuite = STATE.switchState; // Update the component property\r\n    }\r\n\r\n    // Handler for the \"Error Reporting Toggle\" button\r\n    handleSwitchGeminiError() {\r\n        console.log('handleSwitchGeminiError');\r\n        STATE.throwGeminiErrorState = !STATE.throwGeminiErrorState; // Toggle the error reporting state\r\n        localStorage.setItem(\"throw_gemini_error\", STATE.throwGeminiErrorState.toString()); // Save state to local storage\r\n        this.throwGeminiErrorState = STATE.throwGeminiErrorState; // Update the component property\r\n    }\r\n}\r\n\r\n// Define the custom element\r\ncustomElements.define('gemini-layouts', GeminiLayouts);\r\n\r\n// Export the class\r\nexport { GeminiLayouts };\r\n","import{isSingleExpression as i}from\"./directive-helpers.js\";import{Directive as t,PartType as e}from\"./directive.js\";export{directive}from\"./directive.js\";\n/**\n * @license\n * Copyright 2017 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const s=(i,t)=>{const e=i._$AN;if(void 0===e)return!1;for(const i of e)i._$AO?.(t,!1),s(i,t);return!0},o=i=>{let t,e;do{if(void 0===(t=i._$AM))break;e=t._$AN,e.delete(i),i=t}while(0===e?.size)},r=i=>{for(let t;t=i._$AM;i=t){let e=t._$AN;if(void 0===e)t._$AN=e=new Set;else if(e.has(i))break;e.add(i),c(t)}};function h(i){void 0!==this._$AN?(o(this),this._$AM=i,r(this)):this._$AM=i}function n(i,t=!1,e=0){const r=this._$AH,h=this._$AN;if(void 0!==h&&0!==h.size)if(t)if(Array.isArray(r))for(let i=e;i<r.length;i++)s(r[i],!1),o(r[i]);else null!=r&&(s(r,!1),o(r));else s(this,i)}const c=i=>{i.type==e.CHILD&&(i._$AP??=n,i._$AQ??=h)};class f extends t{constructor(){super(...arguments),this._$AN=void 0}_$AT(i,t,e){super._$AT(i,t,e),r(this),this.isConnected=i._$AU}_$AO(i,t=!0){i!==this.isConnected&&(this.isConnected=i,i?this.reconnected?.():this.disconnected?.()),t&&(s(this,i),o(this))}setValue(t){if(i(this._$Ct))this._$Ct._$AI(t,this);else{const i=[...this._$Ct._$AH];i[this._$Ci]=t,this._$Ct._$AI(i,this,0)}}disconnected(){}reconnected(){}}export{f as AsyncDirective,t as Directive,e as PartType};\n//# sourceMappingURL=async-directive.js.map\n","import{nothing as t}from\"../lit-html.js\";import{AsyncDirective as i}from\"../async-directive.js\";import{directive as s}from\"../directive.js\";\n/**\n * @license\n * Copyright 2020 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const e=()=>new h;class h{}const o=new WeakMap,n=s(class extends i{render(i){return t}update(i,[s]){const e=s!==this.Y;return e&&void 0!==this.Y&&this.rt(void 0),(e||this.lt!==this.ct)&&(this.Y=s,this.ht=i.options?.host,this.rt(this.ct=i.element)),t}rt(t){if(this.isConnected||(t=void 0),\"function\"==typeof this.Y){const i=this.ht??globalThis;let s=o.get(i);void 0===s&&(s=new WeakMap,o.set(i,s)),void 0!==s.get(this.Y)&&this.Y.call(this.ht,void 0),s.set(this.Y,t),void 0!==t&&this.Y.call(this.ht,t)}else this.Y.value=t}get lt(){return\"function\"==typeof this.Y?o.get(this.ht??globalThis)?.get(this.Y):this.Y?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});export{e as createRef,n as ref};\n//# sourceMappingURL=ref.js.map\n","var __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nvar __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateIn = (member, obj) => {\n  if (Object(obj) !== obj)\n    throw TypeError('Cannot use the \"in\" operator on this value');\n  return member.has(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateMethod = (obj, member, method) => {\n  __accessCheck(obj, member, \"access private method\");\n  return method;\n};\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction defaultEquals(a, b) {\n  return Object.is(a, b);\n}\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nlet activeConsumer = null;\nlet inNotificationPhase = false;\nlet epoch = 1;\nconst SIGNAL = /* @__PURE__ */ Symbol(\"SIGNAL\");\nfunction setActiveConsumer(consumer) {\n  const prev = activeConsumer;\n  activeConsumer = consumer;\n  return prev;\n}\nfunction getActiveConsumer() {\n  return activeConsumer;\n}\nfunction isInNotificationPhase() {\n  return inNotificationPhase;\n}\nconst REACTIVE_NODE = {\n  version: 0,\n  lastCleanEpoch: 0,\n  dirty: false,\n  producerNode: void 0,\n  producerLastReadVersion: void 0,\n  producerIndexOfThis: void 0,\n  nextProducerIndex: 0,\n  liveConsumerNode: void 0,\n  liveConsumerIndexOfThis: void 0,\n  consumerAllowSignalWrites: false,\n  consumerIsAlwaysLive: false,\n  producerMustRecompute: () => false,\n  producerRecomputeValue: () => {\n  },\n  consumerMarkedDirty: () => {\n  },\n  consumerOnSignalRead: () => {\n  }\n};\nfunction producerAccessed(node) {\n  if (inNotificationPhase) {\n    throw new Error(\n      typeof ngDevMode !== \"undefined\" && ngDevMode ? `Assertion error: signal read during notification phase` : \"\"\n    );\n  }\n  if (activeConsumer === null) {\n    return;\n  }\n  activeConsumer.consumerOnSignalRead(node);\n  const idx = activeConsumer.nextProducerIndex++;\n  assertConsumerNode(activeConsumer);\n  if (idx < activeConsumer.producerNode.length && activeConsumer.producerNode[idx] !== node) {\n    if (consumerIsLive(activeConsumer)) {\n      const staleProducer = activeConsumer.producerNode[idx];\n      producerRemoveLiveConsumerAtIndex(staleProducer, activeConsumer.producerIndexOfThis[idx]);\n    }\n  }\n  if (activeConsumer.producerNode[idx] !== node) {\n    activeConsumer.producerNode[idx] = node;\n    activeConsumer.producerIndexOfThis[idx] = consumerIsLive(activeConsumer) ? producerAddLiveConsumer(node, activeConsumer, idx) : 0;\n  }\n  activeConsumer.producerLastReadVersion[idx] = node.version;\n}\nfunction producerIncrementEpoch() {\n  epoch++;\n}\nfunction producerUpdateValueVersion(node) {\n  if (!node.dirty && node.lastCleanEpoch === epoch) {\n    return;\n  }\n  if (!node.producerMustRecompute(node) && !consumerPollProducersForChange(node)) {\n    node.dirty = false;\n    node.lastCleanEpoch = epoch;\n    return;\n  }\n  node.producerRecomputeValue(node);\n  node.dirty = false;\n  node.lastCleanEpoch = epoch;\n}\nfunction producerNotifyConsumers(node) {\n  if (node.liveConsumerNode === void 0) {\n    return;\n  }\n  const prev = inNotificationPhase;\n  inNotificationPhase = true;\n  try {\n    for (const consumer of node.liveConsumerNode) {\n      if (!consumer.dirty) {\n        consumerMarkDirty(consumer);\n      }\n    }\n  } finally {\n    inNotificationPhase = prev;\n  }\n}\nfunction producerUpdatesAllowed() {\n  return (activeConsumer == null ? void 0 : activeConsumer.consumerAllowSignalWrites) !== false;\n}\nfunction consumerMarkDirty(node) {\n  var _a;\n  node.dirty = true;\n  producerNotifyConsumers(node);\n  (_a = node.consumerMarkedDirty) == null ? void 0 : _a.call(node.wrapper ?? node);\n}\nfunction consumerBeforeComputation(node) {\n  node && (node.nextProducerIndex = 0);\n  return setActiveConsumer(node);\n}\nfunction consumerAfterComputation(node, prevConsumer) {\n  setActiveConsumer(prevConsumer);\n  if (!node || node.producerNode === void 0 || node.producerIndexOfThis === void 0 || node.producerLastReadVersion === void 0) {\n    return;\n  }\n  if (consumerIsLive(node)) {\n    for (let i = node.nextProducerIndex; i < node.producerNode.length; i++) {\n      producerRemoveLiveConsumerAtIndex(node.producerNode[i], node.producerIndexOfThis[i]);\n    }\n  }\n  while (node.producerNode.length > node.nextProducerIndex) {\n    node.producerNode.pop();\n    node.producerLastReadVersion.pop();\n    node.producerIndexOfThis.pop();\n  }\n}\nfunction consumerPollProducersForChange(node) {\n  assertConsumerNode(node);\n  for (let i = 0; i < node.producerNode.length; i++) {\n    const producer = node.producerNode[i];\n    const seenVersion = node.producerLastReadVersion[i];\n    if (seenVersion !== producer.version) {\n      return true;\n    }\n    producerUpdateValueVersion(producer);\n    if (seenVersion !== producer.version) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction producerAddLiveConsumer(node, consumer, indexOfThis) {\n  var _a;\n  assertProducerNode(node);\n  assertConsumerNode(node);\n  if (node.liveConsumerNode.length === 0) {\n    (_a = node.watched) == null ? void 0 : _a.call(node.wrapper);\n    for (let i = 0; i < node.producerNode.length; i++) {\n      node.producerIndexOfThis[i] = producerAddLiveConsumer(node.producerNode[i], node, i);\n    }\n  }\n  node.liveConsumerIndexOfThis.push(indexOfThis);\n  return node.liveConsumerNode.push(consumer) - 1;\n}\nfunction producerRemoveLiveConsumerAtIndex(node, idx) {\n  var _a;\n  assertProducerNode(node);\n  assertConsumerNode(node);\n  if (typeof ngDevMode !== \"undefined\" && ngDevMode && idx >= node.liveConsumerNode.length) {\n    throw new Error(\n      `Assertion error: active consumer index ${idx} is out of bounds of ${node.liveConsumerNode.length} consumers)`\n    );\n  }\n  if (node.liveConsumerNode.length === 1) {\n    (_a = node.unwatched) == null ? void 0 : _a.call(node.wrapper);\n    for (let i = 0; i < node.producerNode.length; i++) {\n      producerRemoveLiveConsumerAtIndex(node.producerNode[i], node.producerIndexOfThis[i]);\n    }\n  }\n  const lastIdx = node.liveConsumerNode.length - 1;\n  node.liveConsumerNode[idx] = node.liveConsumerNode[lastIdx];\n  node.liveConsumerIndexOfThis[idx] = node.liveConsumerIndexOfThis[lastIdx];\n  node.liveConsumerNode.length--;\n  node.liveConsumerIndexOfThis.length--;\n  if (idx < node.liveConsumerNode.length) {\n    const idxProducer = node.liveConsumerIndexOfThis[idx];\n    const consumer = node.liveConsumerNode[idx];\n    assertConsumerNode(consumer);\n    consumer.producerIndexOfThis[idxProducer] = idx;\n  }\n}\nfunction consumerIsLive(node) {\n  var _a;\n  return node.consumerIsAlwaysLive || (((_a = node == null ? void 0 : node.liveConsumerNode) == null ? void 0 : _a.length) ?? 0) > 0;\n}\nfunction assertConsumerNode(node) {\n  node.producerNode ?? (node.producerNode = []);\n  node.producerIndexOfThis ?? (node.producerIndexOfThis = []);\n  node.producerLastReadVersion ?? (node.producerLastReadVersion = []);\n}\nfunction assertProducerNode(node) {\n  node.liveConsumerNode ?? (node.liveConsumerNode = []);\n  node.liveConsumerIndexOfThis ?? (node.liveConsumerIndexOfThis = []);\n}\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction computedGet(node) {\n  producerUpdateValueVersion(node);\n  producerAccessed(node);\n  if (node.value === ERRORED) {\n    throw node.error;\n  }\n  return node.value;\n}\nfunction createComputed(computation) {\n  const node = Object.create(COMPUTED_NODE);\n  node.computation = computation;\n  const computed = () => computedGet(node);\n  computed[SIGNAL] = node;\n  return computed;\n}\nconst UNSET = /* @__PURE__ */ Symbol(\"UNSET\");\nconst COMPUTING = /* @__PURE__ */ Symbol(\"COMPUTING\");\nconst ERRORED = /* @__PURE__ */ Symbol(\"ERRORED\");\nconst COMPUTED_NODE = /* @__PURE__ */ (() => {\n  return {\n    ...REACTIVE_NODE,\n    value: UNSET,\n    dirty: true,\n    error: null,\n    equal: defaultEquals,\n    producerMustRecompute(node) {\n      return node.value === UNSET || node.value === COMPUTING;\n    },\n    producerRecomputeValue(node) {\n      if (node.value === COMPUTING) {\n        throw new Error(\"Detected cycle in computations.\");\n      }\n      const oldValue = node.value;\n      node.value = COMPUTING;\n      const prevConsumer = consumerBeforeComputation(node);\n      let newValue;\n      let wasEqual = false;\n      try {\n        newValue = node.computation.call(node.wrapper);\n        const oldOk = oldValue !== UNSET && oldValue !== ERRORED;\n        wasEqual = oldOk && node.equal.call(node.wrapper, oldValue, newValue);\n      } catch (err) {\n        newValue = ERRORED;\n        node.error = err;\n      } finally {\n        consumerAfterComputation(node, prevConsumer);\n      }\n      if (wasEqual) {\n        node.value = oldValue;\n        return;\n      }\n      node.value = newValue;\n      node.version++;\n    }\n  };\n})();\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction defaultThrowError() {\n  throw new Error();\n}\nlet throwInvalidWriteToSignalErrorFn = defaultThrowError;\nfunction throwInvalidWriteToSignalError() {\n  throwInvalidWriteToSignalErrorFn();\n}\n/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction createSignal(initialValue) {\n  const node = Object.create(SIGNAL_NODE);\n  node.value = initialValue;\n  const getter = () => {\n    producerAccessed(node);\n    return node.value;\n  };\n  getter[SIGNAL] = node;\n  return getter;\n}\nfunction signalGetFn() {\n  producerAccessed(this);\n  return this.value;\n}\nfunction signalSetFn(node, newValue) {\n  if (!producerUpdatesAllowed()) {\n    throwInvalidWriteToSignalError();\n  }\n  if (!node.equal.call(node.wrapper, node.value, newValue)) {\n    node.value = newValue;\n    signalValueChanged(node);\n  }\n}\nconst SIGNAL_NODE = /* @__PURE__ */ (() => {\n  return {\n    ...REACTIVE_NODE,\n    equal: defaultEquals,\n    value: void 0\n  };\n})();\nfunction signalValueChanged(node) {\n  node.version++;\n  producerIncrementEpoch();\n  producerNotifyConsumers(node);\n}\n/**\n * @license\n * Copyright 2024 Bloomberg Finance L.P.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst NODE = Symbol(\"node\");\nvar Signal;\n((Signal2) => {\n  var _a, _brand, brand_fn, _b, _brand2, brand_fn2;\n  class State {\n    constructor(initialValue, options = {}) {\n      __privateAdd(this, _brand);\n      __publicField(this, _a);\n      const ref = createSignal(initialValue);\n      const node = ref[SIGNAL];\n      this[NODE] = node;\n      node.wrapper = this;\n      if (options) {\n        const equals = options.equals;\n        if (equals) {\n          node.equal = equals;\n        }\n        node.watched = options[Signal2.subtle.watched];\n        node.unwatched = options[Signal2.subtle.unwatched];\n      }\n    }\n    get() {\n      if (!(0, Signal2.isState)(this))\n        throw new TypeError(\"Wrong receiver type for Signal.State.prototype.get\");\n      return signalGetFn.call(this[NODE]);\n    }\n    set(newValue) {\n      if (!(0, Signal2.isState)(this))\n        throw new TypeError(\"Wrong receiver type for Signal.State.prototype.set\");\n      if (isInNotificationPhase()) {\n        throw new Error(\"Writes to signals not permitted during Watcher callback\");\n      }\n      const ref = this[NODE];\n      signalSetFn(ref, newValue);\n    }\n  }\n  _a = NODE;\n  _brand = new WeakSet();\n  brand_fn = function() {\n  };\n  Signal2.isState = (s) => __privateIn(_brand, s);\n  Signal2.State = State;\n  class Computed {\n    // Create a Signal which evaluates to the value returned by the callback.\n    // Callback is called with this signal as the parameter.\n    constructor(computation, options) {\n      __privateAdd(this, _brand2);\n      __publicField(this, _b);\n      const ref = createComputed(computation);\n      const node = ref[SIGNAL];\n      node.consumerAllowSignalWrites = true;\n      this[NODE] = node;\n      node.wrapper = this;\n      if (options) {\n        const equals = options.equals;\n        if (equals) {\n          node.equal = equals;\n        }\n        node.watched = options[Signal2.subtle.watched];\n        node.unwatched = options[Signal2.subtle.unwatched];\n      }\n    }\n    get() {\n      if (!(0, Signal2.isComputed)(this))\n        throw new TypeError(\"Wrong receiver type for Signal.Computed.prototype.get\");\n      return computedGet(this[NODE]);\n    }\n  }\n  _b = NODE;\n  _brand2 = new WeakSet();\n  brand_fn2 = function() {\n  };\n  Signal2.isComputed = (c) => __privateIn(_brand2, c);\n  Signal2.Computed = Computed;\n  ((subtle2) => {\n    var _a2, _brand3, brand_fn3, _assertSignals, assertSignals_fn;\n    function untrack(cb) {\n      let output;\n      let prevActiveConsumer = null;\n      try {\n        prevActiveConsumer = setActiveConsumer(null);\n        output = cb();\n      } finally {\n        setActiveConsumer(prevActiveConsumer);\n      }\n      return output;\n    }\n    subtle2.untrack = untrack;\n    function introspectSources(sink) {\n      var _a3;\n      if (!(0, Signal2.isComputed)(sink) && !(0, Signal2.isWatcher)(sink)) {\n        throw new TypeError(\"Called introspectSources without a Computed or Watcher argument\");\n      }\n      return ((_a3 = sink[NODE].producerNode) == null ? void 0 : _a3.map((n) => n.wrapper)) ?? [];\n    }\n    subtle2.introspectSources = introspectSources;\n    function introspectSinks(signal) {\n      var _a3;\n      if (!(0, Signal2.isComputed)(signal) && !(0, Signal2.isState)(signal)) {\n        throw new TypeError(\"Called introspectSinks without a Signal argument\");\n      }\n      return ((_a3 = signal[NODE].liveConsumerNode) == null ? void 0 : _a3.map((n) => n.wrapper)) ?? [];\n    }\n    subtle2.introspectSinks = introspectSinks;\n    function hasSinks(signal) {\n      if (!(0, Signal2.isComputed)(signal) && !(0, Signal2.isState)(signal)) {\n        throw new TypeError(\"Called hasSinks without a Signal argument\");\n      }\n      const liveConsumerNode = signal[NODE].liveConsumerNode;\n      if (!liveConsumerNode)\n        return false;\n      return liveConsumerNode.length > 0;\n    }\n    subtle2.hasSinks = hasSinks;\n    function hasSources(signal) {\n      if (!(0, Signal2.isComputed)(signal) && !(0, Signal2.isWatcher)(signal)) {\n        throw new TypeError(\"Called hasSources without a Computed or Watcher argument\");\n      }\n      const producerNode = signal[NODE].producerNode;\n      if (!producerNode)\n        return false;\n      return producerNode.length > 0;\n    }\n    subtle2.hasSources = hasSources;\n    class Watcher {\n      // When a (recursive) source of Watcher is written to, call this callback,\n      // if it hasn't already been called since the last `watch` call.\n      // No signals may be read or written during the notify.\n      constructor(notify) {\n        __privateAdd(this, _brand3);\n        __privateAdd(this, _assertSignals);\n        __publicField(this, _a2);\n        let node = Object.create(REACTIVE_NODE);\n        node.wrapper = this;\n        node.consumerMarkedDirty = notify;\n        node.consumerIsAlwaysLive = true;\n        node.consumerAllowSignalWrites = false;\n        node.producerNode = [];\n        this[NODE] = node;\n      }\n      // Add these signals to the Watcher's set, and set the watcher to run its\n      // notify callback next time any signal in the set (or one of its dependencies) changes.\n      // Can be called with no arguments just to reset the \"notified\" state, so that\n      // the notify callback will be invoked again.\n      watch(...signals) {\n        if (!(0, Signal2.isWatcher)(this)) {\n          throw new TypeError(\"Called unwatch without Watcher receiver\");\n        }\n        __privateMethod(this, _assertSignals, assertSignals_fn).call(this, signals);\n        const node = this[NODE];\n        node.dirty = false;\n        const prev = setActiveConsumer(node);\n        for (const signal of signals) {\n          producerAccessed(signal[NODE]);\n        }\n        setActiveConsumer(prev);\n      }\n      // Remove these signals from the watched set (e.g., for an effect which is disposed)\n      unwatch(...signals) {\n        if (!(0, Signal2.isWatcher)(this)) {\n          throw new TypeError(\"Called unwatch without Watcher receiver\");\n        }\n        __privateMethod(this, _assertSignals, assertSignals_fn).call(this, signals);\n        const node = this[NODE];\n        assertConsumerNode(node);\n        for (let i = node.producerNode.length - 1; i >= 0; i--) {\n          if (signals.includes(node.producerNode[i].wrapper)) {\n            producerRemoveLiveConsumerAtIndex(node.producerNode[i], node.producerIndexOfThis[i]);\n            const lastIdx = node.producerNode.length - 1;\n            node.producerNode[i] = node.producerNode[lastIdx];\n            node.producerIndexOfThis[i] = node.producerIndexOfThis[lastIdx];\n            node.producerNode.length--;\n            node.producerIndexOfThis.length--;\n            node.nextProducerIndex--;\n            if (i < node.producerNode.length) {\n              const idxConsumer = node.producerIndexOfThis[i];\n              const producer = node.producerNode[i];\n              assertProducerNode(producer);\n              producer.liveConsumerIndexOfThis[idxConsumer] = i;\n            }\n          }\n        }\n      }\n      // Returns the set of computeds in the Watcher's set which are still yet\n      // to be re-evaluated\n      getPending() {\n        if (!(0, Signal2.isWatcher)(this)) {\n          throw new TypeError(\"Called getPending without Watcher receiver\");\n        }\n        const node = this[NODE];\n        return node.producerNode.filter((n) => n.dirty).map((n) => n.wrapper);\n      }\n    }\n    _a2 = NODE;\n    _brand3 = new WeakSet();\n    brand_fn3 = function() {\n    };\n    _assertSignals = new WeakSet();\n    assertSignals_fn = function(signals) {\n      for (const signal of signals) {\n        if (!(0, Signal2.isComputed)(signal) && !(0, Signal2.isState)(signal)) {\n          throw new TypeError(\"Called watch/unwatch without a Computed or State argument\");\n        }\n      }\n    };\n    Signal2.isWatcher = (w) => __privateIn(_brand3, w);\n    subtle2.Watcher = Watcher;\n    function currentComputed() {\n      var _a3;\n      return (_a3 = getActiveConsumer()) == null ? void 0 : _a3.wrapper;\n    }\n    subtle2.currentComputed = currentComputed;\n    subtle2.watched = Symbol(\"watched\");\n    subtle2.unwatched = Symbol(\"unwatched\");\n  })(Signal2.subtle || (Signal2.subtle = {}));\n})(Signal || (Signal = {}));\nexport {\n  Signal\n};\n","import{Signal as t}from\"signal-polyfill\";\n/**\n * @license\n * Copyright 2023 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const i=Symbol(\"SignalWatcherBrand\"),s=new FinalizationRegistry((({watcher:t,signal:i})=>{t.unwatch(i)})),h=new WeakMap;function e(e){return!0===e[i]?(console.warn(\"SignalWatcher should not be applied to the same class more than once.\"),e):class extends e{constructor(){super(...arguments),this._$St=new t.State(0),this._$Si=!1,this._$So=!0,this._$Sh=new Set}_$Sl(){if(void 0!==this._$Su)return;this._$Sv=new t.Computed((()=>{this._$St.get(),super.performUpdate()}));const i=this._$Su=new t.subtle.Watcher((function(){const t=h.get(this);void 0!==t&&(!1===t._$Si&&t.requestUpdate(),this.watch())}));h.set(i,this),s.register(this,{watcher:i,signal:this._$Sv}),i.watch(this._$Sv)}_$Sp(){void 0!==this._$Su&&(this._$Su.unwatch(this._$Sv),this._$Sv=void 0,this._$Su=void 0)}performUpdate(){this.isUpdatePending&&(this._$Sl(),this._$Si=!0,this._$St.set(this._$St.get()+1),this._$Si=!1,this._$Sv.get())}update(t){try{this._$So?(this._$So=!1,super.update(t)):this._$Sh.forEach((t=>t.commit()))}finally{this.isUpdatePending=!1,this._$Sh.clear()}}requestUpdate(t,i,s){this._$So=!0,super.requestUpdate(t,i,s)}connectedCallback(){super.connectedCallback(),this.requestUpdate()}disconnectedCallback(){super.disconnectedCallback(),queueMicrotask((()=>{!1===this.isConnected&&this._$Sp()}))}_(t){this._$Sh.add(t);const i=this._$So;this.requestUpdate(),this._$So=i}m(t){this._$Sh.delete(t)}}}export{e as SignalWatcher};\n//# sourceMappingURL=signal-watcher.js.map\n","import{directive as i}from\"lit/directive.js\";import{AsyncDirective as t}from\"lit/async-directive.js\";import{Signal as s}from\"signal-polyfill\";\n/**\n * @license\n * Copyright 2023 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */class h extends t{_$Sl(){if(void 0!==this._$Su)return;this._$SW=new s.Computed((()=>{var i;return null===(i=this._$Sj)||void 0===i?void 0:i.get()}));const i=this._$Su=new s.subtle.Watcher((()=>{var t;null===(t=this._$SO)||void 0===t||t._(this),i.watch()}));i.watch(this._$SW)}_$Sp(){var i;void 0!==this._$Su&&(this._$Su.unwatch(this._$SW),this._$SW=void 0,this._$Su=void 0,null===(i=this._$SO)||void 0===i||i.m(this))}commit(){this.setValue(s.subtle.untrack((()=>{var i;return null===(i=this._$SW)||void 0===i?void 0:i.get()})))}render(i){return s.subtle.untrack((()=>i.get()))}update(i,[t]){var h,o;return null!==(h=this._$SO)&&void 0!==h||(this._$SO=null===(o=i.options)||void 0===o?void 0:o.host),t!==this._$Sj&&void 0!==this._$Sj&&this._$Sp(),this._$Sj=t,this._$Sl(),s.subtle.untrack((()=>this._$SW.get()))}disconnected(){this._$Sp()}reconnected(){this._$Sl()}}const o=i(h);export{h as WatchDirective,o as watch};\n//# sourceMappingURL=watch.js.map\n","import{html as o,svg as t}from\"lit/html.js\";import{watch as s}from\"./watch.js\";import{Signal as i}from\"signal-polyfill\";\n/**\n * @license\n * Copyright 2023 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const m=o=>(t,...m)=>o(t,...m.map((o=>o instanceof i.State||o instanceof i.Computed?s(o):o))),l=m(o),r=m(t);export{l as html,r as svg,m as withWatch};\n//# sourceMappingURL=html-tag.js.map\n","import{Signal as t}from\"signal-polyfill\";export*from\"signal-polyfill\";export{SignalWatcher}from\"./lib/signal-watcher.js\";export{WatchDirective,watch}from\"./lib/watch.js\";export{html,svg,withWatch}from\"./lib/html-tag.js\";\n/**\n * @license\n * Copyright 2023 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const l=t.State,o=t.Computed,r=(l,o)=>new t.State(l,o),i=(l,o)=>new t.Computed(l,o);export{o as Computed,l as State,i as computed,r as signal};\n//# sourceMappingURL=index.js.map\n","import{noChange as t}from\"../lit-html.js\";import{directive as e,Directive as r,PartType as s}from\"../directive.js\";\n/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const n=\"important\",i=\" !\"+n,o=e(class extends r{constructor(t){if(super(t),t.type!==s.ATTRIBUTE||\"style\"!==t.name||t.strings?.length>2)throw Error(\"The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.\")}render(t){return Object.keys(t).reduce(((e,r)=>{const s=t[r];return null==s?e:e+`${r=r.includes(\"-\")?r:r.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,\"-$&\").toLowerCase()}:${s};`}),\"\")}update(e,[r]){const{style:s}=e.element;if(void 0===this.ft)return this.ft=new Set(Object.keys(r)),this.render(r);for(const t of this.ft)null==r[t]&&(this.ft.delete(t),t.includes(\"-\")?s.removeProperty(t):s[t]=null);for(const t in r){const e=r[t];if(null!=e){this.ft.add(t);const r=\"string\"==typeof e&&e.endsWith(i);t.includes(\"-\")||r?s.setProperty(t,r?e.slice(0,-11):e,r?n:\"\"):s[t]=e}}return t}});export{o as styleMap};\n//# sourceMappingURL=style-map.js.map\n","var x = (y) => {\n\tvar x = {}; __webpack_require__.d(x, y); return x\n} \nvar y = (x) => (() => (x))\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({ [\"extension_settings\"]: () => (__WEBPACK_EXTERNAL_MODULE__scripts_extensions_js_86ff8498__.extension_settings) });","import {\r\n    saveSettingsDebounced,\r\n} from \"@silly-tavern/script.js\";\r\nimport { extension_settings } from '@silly-tavern/scripts/extensions.js';\r\nimport { signal, type Signal } from '@lit-labs/signals';\r\ninterface SignalState<T> {\r\n    rawSignal: Signal.State<T>;\r\n    get: () => T;\r\n    set: (value: T) => void;\r\n}\r\ntype SignalStateMap<T> = {\r\n    [K in keyof T]: SignalState<T[K]>\r\n};\r\nconst extensionName = \"extension-zerxz-lib\";\r\nconst extensionFolderPath = `scripts/extensions/third-party/${extensionName}`;\r\n//@ts-ignore\r\nextension_settings[extensionName] ??= {};\r\nconst signals: Record<string, Record<string, SignalState<any>>> = {};\r\n// @ts-ignore\r\n// biome-ignore lint/suspicious/noExplicitAny: <explanation>\r\nconst extensionSettings: Record<string, any> = extension_settings[extensionName];\r\nconst getExtensionSettings = () => extension_settings;\r\nexport function useExtensionSetting<T extends Record<string, any>>(path: string = \"default\", _defaultSettings: T | (() => T) | undefined = undefined) {\r\n    if (path) {\r\n        extensionSettings[path] ??= {};\r\n        signals[path] ??= {};\r\n    }\r\n    const _extensionSettings = path ? extensionSettings[path] : extensionSettings;\r\n    if (_defaultSettings) {\r\n        const settings = typeof _defaultSettings === \"function\" ? _defaultSettings() : _defaultSettings;\r\n        for (const key in settings) {\r\n            _extensionSettings[key] ??= settings[key];\r\n        }\r\n        saveSettingsDebounced();\r\n    }\r\n    const _signals = (path ? signals[path] : signals) as Record<string, SignalState<any>>;\r\n    for (const key in _extensionSettings) {\r\n        _signals[key] ??= createSignal(key, _extensionSettings[key]);\r\n    }\r\n\r\n    saveSettingsDebounced();\r\n    // @ts-ignore\r\n    function setSetting(path: string, value: any) {\r\n        _extensionSettings[path] = value;\r\n        saveSettingsDebounced();\r\n    }\r\n    function setSettings(settings: Record<string, any>) {\r\n        Object.assign(_extensionSettings, settings);\r\n        saveSettingsDebounced();\r\n    }\r\n    function getSettings() {\r\n        return _extensionSettings;\r\n    }\r\n    function getSetting(path: string) {\r\n        return _extensionSettings[path];\r\n    }\r\n    function getSignal<K extends keyof T>(path: K): SignalState<T[K]> {\r\n        _signals[path as string] ??= createSignal(path as string, _extensionSettings[path as string]);\r\n        return _signals[path as string] as SignalState<T[K]>;\r\n    }\r\n    function createSignal<T>(path: string, value: T, options?: Signal.Options<T>) {\r\n        return {\r\n            rawSignal: signal(value, options),\r\n            get() {\r\n                return this.rawSignal.get();\r\n            },\r\n            set(value: T) {\r\n                this.rawSignal.set(value);\r\n                setSetting(path, value);\r\n            },\r\n        } as SignalState<T>;\r\n    }\r\n    // 修改getSignals的返回类型\r\n    function getSignals(): SignalStateMap<T> {\r\n        return _signals as SignalStateMap<T>;\r\n    }\r\n\r\n    return {\r\n        getExtensionSettings,\r\n        extensionSettings: _extensionSettings,\r\n        setSetting,\r\n        getSetting,\r\n        setSettings,\r\n        getSettings,\r\n        saveSettingsDebounced,\r\n        extensionFolderPath,\r\n        getSignal,\r\n        getSignals,\r\n    }\r\n}\r\n","import { useExtensionSetting } from \"./extension\";\r\n\r\nexport const htmlInjectorSettings = useExtensionSetting(\"HtmlInjector\", () => {\r\n    return {\r\n        lastMesTextContent: (localStorage.getItem('lastMesTextContent') || ''),\r\n        isInjectionEnabled: JSON.parse(localStorage.getItem('isInjectionEnabled') || \"true\") as boolean,\r\n        displayMode: Number.parseInt(localStorage.getItem('displayMode') || '1'),\r\n        activationMode: (localStorage.getItem('activationMode') || 'all'),\r\n        customStartFloor: Number.parseInt(localStorage.getItem('customStartFloor') || '1'),\r\n        customEndFloor: Number.parseInt(localStorage.getItem('customEndFloor') || '-1'),\r\n        savedPosition: (localStorage.getItem('edgeControlsPosition') || 'top-right'),\r\n        isEdgeControlsCollapsed: (JSON.parse(localStorage.getItem('isEdgeControlsCollapsed') || \"true\")) as boolean,\r\n        isVisibleSettingsPanel: JSON.parse(localStorage.getItem('isVisibleSettingsPanel') || \"true\") as boolean,\r\n        saveTopPosition: (localStorage.getItem('saveTopPosition') || ''),\r\n        hiddenEdgeControls: false,\r\n    };\r\n});\r\n","import { LitElement, html, type PropertyDeclarations } from 'lit';\r\nimport { ref, createRef } from 'lit/directives/ref.js';\r\nimport { SignalWatcher, signal, watch } from '@lit-labs/signals';\r\nimport { type StyleInfo, styleMap } from 'lit/directives/style-map.js';\r\nimport { useExtensionSetting } from '../utils/extension';\r\nimport { htmlInjectorSettings } from 'utils/setting';\r\n\r\n// Destructure settings and signals from htmlInjectorSettings\r\nconst { saveSettingsDebounced, extensionSettings, setSetting, getSettings, getSignals } = htmlInjectorSettings\r\n\r\n// This function is called when the extension settings are changed in the UI\r\nfunction onExampleInput() {\r\n    extensionSettings.example_setting = \"Test\"; // Translated from \"测试\"\r\n    saveSettingsDebounced();\r\n    setSetting('example_setting2', 'Test'); // Translated from \"测试\"\r\n}\r\n\r\n// Get signals related to HTML injection and UI state\r\nconst {\r\n    lastMesTextContent,\r\n    isInjectionEnabled,\r\n    displayMode,\r\n    activationMode,\r\n    customStartFloor,\r\n    customEndFloor,\r\n    savedPosition,\r\n    isEdgeControlsCollapsed,\r\n    isVisibleSettingsPanel,\r\n    saveTopPosition,\r\n    hiddenEdgeControls,\r\n} = getSignals();\r\n\r\n// ---------------------------------------- Global Variables --------------------------------\r\nconst chatElement = $<HTMLDivElement>('#chat'); // Get the chat element using jQuery\r\n\r\n// MutationObserver to watch for changes in the chat element\r\nconst observer = new MutationObserver((mutations) => {\r\n    let canInject = false;\r\n    for (const mutation of mutations) {\r\n        // Only process childList mutations (when elements are added or removed)\r\n        if (mutation.type !== 'childList') {\r\n            continue;\r\n        }\r\n\r\n        // Check if any added node contains a message text element\r\n        const hasNewMesText = Array.from(mutation.addedNodes).some(node => {\r\n            // Ensure the node is an element\r\n            if (node.nodeType !== Node.ELEMENT_NODE || !(node instanceof HTMLElement)) {\r\n                return false;\r\n            }\r\n            // Check if the node itself or a descendant has the 'mes_text' class\r\n            return node.classList.contains('mes_text') || node.querySelector('.mes_text');\r\n        });\r\n\r\n        // If a new message text element is found\r\n        if (hasNewMesText) {\r\n            // Check if injection is currently enabled\r\n            if (isInjectionEnabled.get()) {\r\n                canInject = true;\r\n            }\r\n            // Stop processing mutations once a new message text is found\r\n            break;\r\n        }\r\n    }\r\n\r\n    // If a new message text was found and injection is enabled, remove existing iframes and inject new ones\r\n    if (canInject) {\r\n        removeInjectedIframes();\r\n        injectHtmlCode();\r\n    }\r\n});\r\n\r\n// ---------------------------------------- Initialization ----------------------------------------\r\n\r\n// Class to manage iframes for injected HTML\r\nclass IFrameManager {\r\n    private static instance: IFrameManager; // Singleton instance\r\n    private resizeObservers: Map<HTMLIFrameElement, ResizeObserver> = new Map(); // Map to store ResizeObservers for iframes\r\n\r\n    private constructor() { } // Private constructor for singleton pattern\r\n\r\n    // Get the singleton instance\r\n    public static getInstance(): IFrameManager {\r\n        if (!IFrameManager.instance) {\r\n            IFrameManager.instance = new IFrameManager();\r\n        }\r\n        return IFrameManager.instance;\r\n    }\r\n\r\n    // Create a new iframe with the given HTML content\r\n    public createIframe(htmlContent: string): HTMLIFrameElement {\r\n        const iframe = document.createElement('iframe');\r\n        this.setupIframeAttributes(iframe);\r\n        iframe.srcdoc = this.getIframeSrcContent(htmlContent); // Set the iframe content\r\n        this.setupIframeEventListeners(iframe); // Set up event listeners\r\n        return iframe;\r\n    }\r\n\r\n    // Set common attributes and styles for the iframe\r\n    private setupIframeAttributes(iframe: HTMLIFrameElement): void {\r\n        Object.assign(iframe.style, {\r\n            width: '100%',\r\n            border: 'none',\r\n            marginTop: '10px',\r\n            transition: 'height 0.3s ease' // Add smooth transition effect (Translated from \"添加平滑过渡效果\")\r\n        });\r\n    }\r\n\r\n    // Set up event listeners for the iframe\r\n    private setupIframeEventListeners(iframe: HTMLIFrameElement): void {\r\n        iframe.onload = () => {\r\n            this.adjustIframeHeight(iframe);\r\n            // Delay adjustment again to ensure content is fully loaded (Translated from \"延迟再次调整以确保内容完全加载\")\r\n            setTimeout(() => this.adjustIframeHeight(iframe), 500);\r\n\r\n            // Set initial theme (Translated from \"设置初始主题\")\r\n            this.updateIframeTheme(iframe, getSystemTheme());\r\n        };\r\n\r\n        // Create and store ResizeObserver (Translated from \"创建并存储 ResizeObserver\")\r\n        if (iframe.contentWindow) {\r\n            const resizeObserver = new ResizeObserver(() => this.adjustIframeHeight(iframe));\r\n            this.resizeObservers.set(iframe, resizeObserver);\r\n\r\n            iframe.addEventListener('load', () => {\r\n                if (iframe.contentWindow?.document.body) {\r\n                    resizeObserver.observe(iframe.contentWindow.document.body);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    // Adjust the height of the iframe based on its content\r\n    public adjustIframeHeight(iframe: HTMLIFrameElement): void {\r\n        try {\r\n            if (iframe.contentWindow?.document.body) {\r\n                const height = Math.max(\r\n                    iframe.contentWindow.document.documentElement.scrollHeight,\r\n                    iframe.contentWindow.document.body.scrollHeight\r\n                );\r\n                iframe.style.height = `${height + 5}px`;\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to adjust iframe height:', error); // Translated from \"调整iframe高度失败:\"\r\n        }\r\n    }\r\n\r\n    // Update the theme of the iframe content\r\n    public updateIframeTheme(iframe: HTMLIFrameElement, theme: string): void {\r\n        try {\r\n            iframe.contentWindow?.postMessage({ type: 'themeChange', theme }, '*');\r\n        } catch (error) {\r\n            console.error('Failed to update iframe theme:', error); // Translated from \"更新iframe主题失败:\"\r\n        }\r\n    }\r\n\r\n    // Remove an iframe and clean up its ResizeObserver\r\n    public removeIframe(iframe: HTMLIFrameElement): void {\r\n        // Clean up ResizeObserver (Translated from \"清理 ResizeObserver\")\r\n        const observer = this.resizeObservers.get(iframe);\r\n        if (observer) {\r\n            observer.disconnect();\r\n            this.resizeObservers.delete(iframe);\r\n        }\r\n        iframe.remove();\r\n    }\r\n\r\n    // Get the full HTML content for the iframe srcdoc\r\n    private getIframeSrcContent(htmlContent: string): string {\r\n        return `\r\n            <html>\r\n    <head>\r\n        <style>\r\n            /* Custom Styles (Translated from \"自定义样式\") */\r\n            ::-webkit-scrollbar {\r\n                width: 8px;\r\n                height: 8px;\r\n            }\r\n            ::-webkit-scrollbar-track {\r\n                background: rgba(0, 0, 0, 0.1);\r\n                border-radius: 4px;\r\n            }\r\n            ::-webkit-scrollbar-thumb {\r\n                background: rgba(0, 0, 0, 0.3);\r\n                border-radius: 4px;\r\n            }\r\n            ::-webkit-scrollbar-thumb:hover {\r\n                background: rgba(0, 0, 0, 0.5);\r\n            }\r\n            [data-theme=\"dark\"] ::-webkit-scrollbar-track {\r\n                background: rgba(255, 255, 255, 0.1);\r\n            }\r\n            [data-theme=\"dark\"] ::-webkit-scrollbar-thumb {\r\n                background: rgba(255, 255, 255, 0.3);\r\n            }\r\n            [data-theme=\"dark\"] ::-webkit-scrollbar-thumb:hover {\r\n                background: rgba(255, 255, 255, 0.5);\r\n            }\r\n            .container[data-theme=\"light\"] {\r\n                --bg-color: rgba(240, 240, 255, 0.1);\r\n                --text-color: #1e1e1e;\r\n                --border-color: rgba(139,226,115,0.3);\r\n                --nav-bg-color: rgba(240,240,255,0.4);\r\n            }\r\n            .container[data-theme=\"dark\"] {\r\n                --bg-color: rgba(40, 40, 40, 0.2);\r\n                --text-color: #e0e0e0;\r\n                --border-color: rgba(74,74,74,0.3);\r\n                --nav-bg-color: rgba(30,30,30,0.4);\r\n            }\r\n            .container {\r\n                background-color: var(--bg-color);\r\n                color: var(--text-color);\r\n            }\r\n            .container .left-nav {\r\n                background-color: var(--nav-bg-color);\r\n            }\r\n            .container .button, .container .left-nav .section {\r\n                border: 1px solid var(--border-color);\r\n            }\r\n        </style>\r\n    </head>\r\n    <body>\r\n        <div class=\"theme-content\">\r\n            ${htmlContent}\r\n        </div>\r\n        <script>\r\n            window.addEventListener('load', function() {\r\n                window.parent.postMessage('loaded', '*');\r\n                const darkModeMediaQuery = window.matchMedia('(prefers-color-scheme: dark)');\r\n                function handleThemeChange(e) {\r\n                    document.body.setAttribute('data-theme', e.matches ? 'dark' : 'light');\r\n                    window.parent.postMessage({type: 'themeChange', theme: e.matches ? 'dark' : 'light'}, '*');\r\n                }\r\n                darkModeMediaQuery.addListener(handleThemeChange);\r\n                handleThemeChange(darkModeMediaQuery);\r\n                document.querySelectorAll('.qr-button').forEach(button => {\r\n                    button.addEventListener('click', function() {\r\n                        const buttonName = this.textContent.trim();\r\n                        window.parent.postMessage({type: 'buttonClick', name: buttonName}, '*');\r\n                    });\r\n                });\r\n                document.querySelectorAll('.st-text').forEach(textarea => {\r\n                    textarea.addEventListener('input', function() {\r\n                        window.parent.postMessage({type: 'textInput', text: this.value}, '*');\r\n                    });\r\n                    textarea.addEventListener('change', function() {\r\n                        window.parent.postMessage({type: 'textInput', text: this.value}, '*');\r\n                    });\r\n                    const observer = new MutationObserver((mutations) => {\r\n                        mutations.forEach((mutation) => {\r\n                            if (mutation.type === 'attributes' && mutation.attributeName === 'value') {\r\n                                window.parent.postMessage({type: 'textInput', text: textarea.value}, '*');\r\n                            }\r\n                        });\r\n                    });\r\n                    observer.observe(textarea, { attributes: true });\r\n                });\r\n                document.querySelectorAll('.st-send-button').forEach(button => {\r\n                    button.addEventListener('click', function() {\r\n                        window.parent.postMessage({type: 'sendClick'}, '*');\r\n                    });\r\n                });\r\n            });\r\n            window.addEventListener('message', function(event) {\r\n                if (event.data.type === 'themeChange') {\r\n                    document.body.setAttribute('data-theme', event.data.theme);\r\n                }\r\n            });\r\n        </script>\r\n    </body>\r\n</html>\r\n        `;\r\n    }\r\n}\r\n\r\n\r\n// Modify removeInjectedIframes function (Translated from \"修改 removeInjectedIframes 函数\")\r\nfunction removeInjectedIframes() {\r\n    const iframeManager = IFrameManager.getInstance();\r\n    const iframes = document.querySelectorAll<HTMLIFrameElement>('.mes_text iframe');\r\n    // Remove each iframe using the manager\r\n    for (const iframe of Array.from(iframes)) {\r\n        iframeManager.removeIframe(iframe);\r\n    }\r\n    // Reset display for code elements and remove details wrappers\r\n    const codeElements = document.querySelectorAll<HTMLDivElement>('.mes_text code');\r\n    for (const code of Array.from(codeElements)) {\r\n        code.style.display = ''; // Show the code element\r\n        const details = code.closest('details'); // Find the closest details element\r\n        if (details) {\r\n            // Move the code element out of the details and remove the details\r\n            details.parentNode?.insertBefore(code, details);\r\n            details.remove();\r\n        }\r\n    }\r\n}\r\n\r\n// Inject HTML code into message text elements\r\nfunction injectHtmlCode(specificMesText = null as Element | null) {\r\n    console.log('injectHtmlCode');\r\n    try {\r\n        // Determine which message text elements to target based on activation mode\r\n        const mesTextElements = specificMesText ? [specificMesText] : Array.from(chatElement.find('.mes_text'));\r\n        let targetElements: Element[];\r\n        const iframeManager = IFrameManager.getInstance();\r\n\r\n        switch (activationMode.get()) {\r\n            case 'first':\r\n                targetElements = mesTextElements.slice(0, 1);\r\n                break;\r\n            case 'last':\r\n                targetElements = mesTextElements.slice(-1);\r\n                break;\r\n            case 'lastN':\r\n                // Target the last N elements based on customEndFloor setting\r\n                targetElements = mesTextElements.slice(-customEndFloor.get());\r\n                break;\r\n            case 'custom': {\r\n                // Target a custom range of elements based on customStartFloor and customEndFloor\r\n                const start = customStartFloor.get() - 1; // Adjust for 0-based index\r\n                const end = customEndFloor.get() === -1 ? undefined : customEndFloor.get(); // -1 means last element\r\n                targetElements = mesTextElements.slice(start, end);\r\n                break;\r\n            }\r\n            default: // 'all'\r\n                targetElements = mesTextElements;\r\n        }\r\n\r\n        // Iterate through the target elements and inject HTML if a code block is found\r\n        for (let i = 0; i < targetElements.length; i++) {\r\n            const mesText = targetElements[i];\r\n            const codeElement = mesText.querySelector('code');\r\n            if (!codeElement) {\r\n                continue; // Skip if no code element is found\r\n            }\r\n\r\n            // Extract HTML content from the code element\r\n            const htmlContent = codeElement.innerText.trim();\r\n\r\n            // Basic check to see if the content looks like HTML\r\n            if (!htmlContent.startsWith(\"<\") || !htmlContent.endsWith(\">\")) {\r\n                continue; // Skip if it doesn't look like HTML\r\n            }\r\n\r\n            // Create and insert the iframe\r\n            const iframe = iframeManager.createIframe(htmlContent);\r\n            // Apply display mode settings\r\n            if (displayMode.get() === 2) {\r\n                // Wrap the original code in a details/summary element\r\n                const details = document.createElement('details');\r\n                const summary = document.createElement('summary');\r\n                summary.textContent = '[Original Code]'; // Translated from \"[原代码]\"\r\n                details.appendChild(summary);\r\n                codeElement.parentNode?.insertBefore(details, codeElement);\r\n                details.appendChild(codeElement);\r\n            } else if (displayMode.get() === 3) {\r\n                // Hide the original code element\r\n                codeElement.style.display = 'none';\r\n            }\r\n\r\n            // Insert the iframe after the code element (or its wrapper)\r\n            codeElement.parentNode?.insertBefore(iframe, codeElement.nextSibling);\r\n\r\n            // Append the iframe to the message text element (redundant with insertBefore, might need review)\r\n            mesText.appendChild(iframe);\r\n        }\r\n    } catch (error) {\r\n        console.error('HTML injection failed:', error); // Translated from \"HTML注入失败:\"\r\n    }\r\n}\r\n\r\n// ---------------------------------------- Helper Functions ----------------------------------------\r\n\r\n// Adjust the height of a single iframe (redundant with IFrameManager method, might need review)\r\nfunction adjustIframeHeight(iframe: HTMLIFrameElement) {\r\n    try {\r\n        if (iframe.contentWindow?.document.body) {\r\n            const height = iframe.contentWindow.document.documentElement.scrollHeight;\r\n            iframe.style.height = `${height + 5}px`;\r\n        }\r\n    } catch (error) {\r\n        console.error('Failed to adjust iframe height:', error); // Translated from \"调整iframe高度失败:\"\r\n    }\r\n}\r\n\r\n// Get the current system theme (dark or light)\r\nfunction getSystemTheme() {\r\n    return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\r\n}\r\n\r\n// Update the theme of all injected iframes\r\nfunction updateAllIframesTheme() {\r\n    const iframes = document.querySelectorAll('.mes_text iframe');\r\n    // biome-ignore lint/complexity/noForEach: Iterating over a NodeList is acceptable here\r\n    iframes.forEach(iframe => {\r\n        try {\r\n            // @ts-ignore // Ignoring potential type issue with contentWindow\r\n            if (iframe.contentWindow) {\r\n                // @ts-ignore // Ignoring potential type issue with postMessage\r\n                iframe.contentWindow.postMessage({ type: 'themeChange', theme: getSystemTheme() }, '*');\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to update iframe theme:', error); // Translated from \"更新iframe主题失败:\"\r\n        }\r\n    });\r\n}\r\n\r\n// Handle messages received from iframes\r\nfunction handleMessage(event: MessageEvent) {\r\n    try {\r\n        // If the message is 'loaded', adjust the iframe height\r\n        if (event.data === 'loaded') {\r\n            const iframes = document.querySelectorAll<HTMLIFrameElement>('.mes_text iframe');\r\n            // biome-ignore lint/complexity/noForEach: Iterating over a NodeList is acceptable here\r\n            iframes.forEach(iframe => {\r\n                // @ts-ignore // Ignoring potential type issue with contentWindow\r\n                if (iframe.contentWindow === event.source) {\r\n                    adjustIframeHeight(iframe);\r\n                }\r\n            });\r\n        } else if (event.data.type === 'buttonClick') {\r\n            // If a button in an iframe was clicked, find and click the corresponding QR button in the main document\r\n            const buttonName = event.data.name;\r\n            jQuery('.qr--button.menu_button').each(function () {\r\n                if (jQuery(this).find('.qr--button-label').text().trim() === buttonName) {\r\n                    jQuery(this).trigger('click');\r\n                    return false; // Stop iteration\r\n                }\r\n            });\r\n        } else if (event.data.type === 'textInput') {\r\n            // If text was input in an iframe textarea, update the main send textarea\r\n            const sendTextarea = document.getElementById('send_textarea');\r\n            if (sendTextarea) {\r\n                // @ts-ignore // Ignoring potential type issue with value\r\n                sendTextarea.value = event.data.text;\r\n                // Dispatch input and change events to trigger SillyTavern's internal handling\r\n                sendTextarea.dispatchEvent(new Event('input', { bubbles: true }));\r\n                sendTextarea.dispatchEvent(new Event('change', { bubbles: true }));\r\n            }\r\n        } else if (event.data.type === 'sendClick') {\r\n            // If the send button in an iframe was clicked, click the main send button\r\n            const sendButton = document.getElementById('send_but');\r\n            if (sendButton) {\r\n                sendButton.click();\r\n            }\r\n        }\r\n    } catch (error) {\r\n        console.error('Failed to handle message:', error); // Translated from \"处理消息失败:\"\r\n    }\r\n}\r\n\r\n// LitElement component for the settings panel\r\nclass SettingsPanel extends SignalWatcher(LitElement) {\r\n    // Disable shadow DOM\r\n    protected createRenderRoot(): HTMLElement | DocumentFragment {\r\n        return this;\r\n    }\r\n\r\n    // Create refs for specific elements in the template\r\n    public customFloorSettingsRef = createRef<HTMLDivElement>();\r\n    public LastSettingsRef = createRef<HTMLDivElement>();\r\n\r\n    // Declare a property to hold a reference to the EdgeControls component\r\n    declare edgeControls: EdgeControls\r\n\r\n    // Render method for the settings panel\r\n    render() {\r\n        // Control the display of the settings panel based on its visibility signal\r\n        this.style.display = isVisibleSettingsPanel.get() ? 'none' : 'block';\r\n        this.classList.add('drawer'); // Add drawer class\r\n\r\n        return html`\r\n            <div id=\"html-injector-settings-header\" class=\"inline-drawer-header\">\r\n                <span class=\"inline-drawer-title\">HTML Injector Settings</span> <div id=\"html-injector-close-settings\" class=\"inline-drawer-icon fa-solid fa-circle-xmark\" @click=${this.toggleSettingsPanel}></div>\r\n            </div>\r\n            <div id=\"settings-content\">\r\n                <div class=\"settings-section\">\r\n                    <h3 class=\"settings-subtitle\">Edge Control Panel Position</h3> <select id=\"edge-controls-position\" class=\"settings-select theme-element\" @change=${this.handleSavePositionChange}>\r\n                    <option value=\"top-right\"                     .selected=${savedPosition.get() === \"top-right\"}>Top Right of Interface</option> <option value=\"right-three-quarters\" .selected=${savedPosition.get() === \"right-three-quarters\"}>Right Side 3/4 Position</option> <option value=\"right-middle\"           .selected=${savedPosition.get() === \"right-middle\"}>Right Side Middle</option> <option value=\"top-left\"             .selected=${savedPosition.get() === \"top-left\"}>Top Left of Interface</option> <option value=\"left-three-quarters\"  .selected=${savedPosition.get() === \"left-three-quarters\"}>Left Side 3/4 Position</option> <option value=\"left-middle\"          .selected=${savedPosition.get() === \"left-middle\"}>Left Side Middle</option> <option value=\"custom\"               .selected=${savedPosition.get() === \"custom\"}>Custom Position</option> <option value=\"hidden\"               .selected=${savedPosition.get() === \"hidden\"}>Hidden</option> </select>\r\n                </div>\r\n                <div class=\"settings-section\">\r\n                <h3 class=\"settings-subtitle\">Display Mode</h3> <label class=\"settings-option\"><input type=\"radio\" name=\"display-mode\" value=\"1\" .checked=${displayMode.get() === 1} @change=${this.handleDisplayModeChange}> Show Original Code and Injected Effect Together</label> <label class=\"settings-option\"><input type=\"radio\" name=\"display-mode\" value=\"2\" .checked=${displayMode.get() === 2} @change=${this.handleDisplayModeChange}> Show Original Code as Summary</label> <label class=\"settings-option\"><input type=\"radio\" name=\"display-mode\" value=\"3\" .checked=${displayMode.get() === 3} @change=${this.handleDisplayModeChange}> Hide Original Code, Show Only Injected Effect</label> </div>\r\n                <div class=\"settings-section\">\r\n                    <h3 class=\"settings-subtitle\">Activation Floor</h3> <select id=\"activation-mode\" class=\"settings-select theme-element\" @change=${this.handleActivationModeChange} >\r\n                        <option value=\"all\"    .selected=${activationMode.get() === \"all\"}>All Floors</option> <option value=\"first\"  .selected=${activationMode.get() === \"first\"}>First Floor</option> <option value=\"last\"    .selected=${activationMode.get() === \"last\"}>Last Floor</option> <option value=\"lastN\"  .selected=${activationMode.get() === \"lastN\"}>Last N Floors</option> <option value=\"custom\" .selected=${activationMode.get() === \"custom\"}>Custom Floors</option> </select>\r\n                    <div id=\"custom-floor-settings\" class=\"settings-subsection\" style=${styleMap({\r\n                display: activationMode.get() === 'custom' ? 'block' : 'none'\r\n            })} ${ref(this.customFloorSettingsRef)}>\r\n                        <label class=\"settings-option\">Start Floor: <input type=\"number\" id=\"custom-start-floor\" min=\"1\" .value=${customStartFloor.get().toString()} @change=${this.handleCustomStartFloorChange}></label> <label class=\"settings-option\">End Floor: <input type=\"number\" id=\"custom-end-floor\" min=\"-1\" .value=${customEndFloor.get().toString()} @change=${this.handleCustomEndFloorChange}></label> <p class=\"settings-note\">(-1 means last floor)</p> </div>\r\n                    <div id=\"last-n-settings\" class=\"settings-subsection\" style=${styleMap({\r\n                display: activationMode.get() === 'lastN' ? 'block' : 'none'\r\n            })} ${ref(this.LastSettingsRef)} >\r\n                        <label class=\"settings-option\">Last <input type=\"number\" id=\"last-n-floors\" min=\"1\" .value=${customEndFloor.get().toString()}  @change=${this.handleLastNFloorsChange}> Floors</label> </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"settings-footer\">\r\n                <p>Security Reminder: Please only inject code you trust. Unsafe code may pose potential risks to your system.</p> <p>Note: The HTML code to be injected should be wrapped in \\`\\`\\`, for example:</p> <pre class=\"code-example\">\r\n\\`\\`\\`\r\n&lt;h1&gt;Hello, World!&lt;/h1&gt;\r\n&lt;p&gt;This is an example.&lt;/p&gt;\r\n\\`\\`\\`\r\n        </pre>\r\n        <p>The following are special class names corresponding to ST Tavern functions and simple usage methods:</p> <pre class=\"code-example\">\r\n\\`\\`\\`\r\n&lt;button class=\"qr-button\"&gt;(Your QR button name)&lt;/button&gt; &lt;textarea class=\"st-text\"&gt;(Corresponds to the tavern's input text box, input content will sync to the tavern's text box)&lt;/textarea&gt; &lt;button class=\"st-send-button\"&gt;(Corresponds to the tavern's send button)&lt;/button&gt; \\`\\`\\`\r\n                </pre>\r\n                <p>【Note】Synchronizing the content of the st-text box dynamically inserted by JavaScript to the ST Tavern input box requires processing time. If synchronization is needed, please add a small delay to ensure the text has time to synchronize.</p> <a href=\"https://discord.com/channels/1134557553011998840/1271783456690409554\" target=\"_blank\"> →Discord Tutorial Post Link← Contains detailed instructions and templates like the gal interface </a> </div>\r\n        `\r\n    }\r\n\r\n    // Handlers for settings changes\r\n    handleActivationModeChange(event: Event) {\r\n        const target = event.target as HTMLSelectElement;\r\n        const value = target.value;\r\n        activationMode.set(value); // Update the activation mode signal\r\n        this.updateInjection(); // Trigger injection update\r\n    }\r\n\r\n    handleSavePositionChange(event: Event) {\r\n        const target = event.target as HTMLSelectElement;\r\n        const value = target.value;\r\n        savedPosition.set(value); // Update the saved position signal\r\n        isEdgeControlsCollapsed.set(false); // Ensure edge controls are not collapsed when position changes\r\n        this.edgeControls.updateEdgeControlsPosition(value); // Update the position of the edge controls component\r\n    }\r\n\r\n    handleCustomStartFloorChange(event: Event) {\r\n        const target = event.target as HTMLInputElement;\r\n        const value = Number.parseInt(target.value);\r\n        customStartFloor.set(value); // Update the custom start floor signal\r\n        this.updateInjection(); // Trigger injection update\r\n    }\r\n\r\n    handleCustomEndFloorChange(event: Event) {\r\n        const target = event.target as HTMLInputElement;\r\n        const value = Number.parseInt(target.value);\r\n        customEndFloor.set(value); // Update the custom end floor signal\r\n        this.updateInjection(); // Trigger injection update\r\n    }\r\n\r\n    handleLastNFloorsChange(event: Event) {\r\n        const target = event.target as HTMLInputElement;\r\n        const value = Number.parseInt(target.value);\r\n        customEndFloor.set(value); // Update the custom end floor signal (used for lastN in this case)\r\n        this.updateInjection(); // Trigger injection update\r\n    }\r\n\r\n    handleDisplayModeChange(event: Event) {\r\n        const target = event.target as HTMLInputElement;\r\n        const value = Number.parseInt(target.value);\r\n        displayMode.set(value); // Update the display mode signal\r\n        this.updateInjection(); // Trigger injection update\r\n    }\r\n\r\n    // Toggle the visibility of the settings panel\r\n    toggleSettingsPanel(event: Event) {\r\n        const isVisible = this.style.display === 'block';\r\n        this.style.display = isVisible ? 'block' : 'node'; // Toggle display style\r\n        isVisibleSettingsPanel.set(isVisible); // Update the visibility signal\r\n    }\r\n\r\n    // Update the injected HTML based on current settings\r\n    updateInjection() {\r\n        if (!isInjectionEnabled.get()) {\r\n            return // Do nothing if injection is not enabled\r\n        }\r\n        removeInjectedIframes(); // Remove existing iframes\r\n        injectHtmlCode(); // Inject HTML code based on current settings\r\n    }\r\n}\r\n\r\n// LitElement component for the edge controls panel\r\nclass EdgeControls extends SignalWatcher(LitElement) {\r\n    // Define properties\r\n    static properties: PropertyDeclarations = {\r\n        settingsPanel: { type: Object }, // Reference to the settings panel component\r\n        toggleEdgeButtonStyle: { type: Object }, // Style object for the toggle button\r\n        isDragging: { type: Boolean }, // State for dragging\r\n        startY: { type: Number }, // Starting Y position for dragging\r\n        startTop: { type: Number }, // Starting top position of the element for dragging\r\n        newTop: { type: Number } // New top position during dragging\r\n    }\r\n\r\n    // Declare properties with their types\r\n    public declare settingsPanel: SettingsPanel;\r\n    public declare toggleEdgeButtonStyle: StyleInfo;\r\n    public declare isDragging: boolean;\r\n    public declare startY: number;\r\n    public declare startTop: number;\r\n    public newTop: number\r\n\r\n    // Constructor\r\n    constructor() {\r\n        super();\r\n        // Initialize properties based on saved position\r\n        const position = savedPosition.get();\r\n        const isLeft = position.includes('left');\r\n        this.toggleEdgeButtonStyle = {\r\n            position: 'absolute',\r\n            top: '50%',\r\n            transform: 'translateY(-50%)',\r\n            backgroundColor: 'var(--SmartThemeBlurTintColor, rgba(22, 11, 18, 0.73))',\r\n            color: 'var(--SmartThemeBodyColor, rgba(220, 220, 210, 1))',\r\n            border: '1px solid var(--SmartThemeBorderColor, rgba(217, 90, 157, 0.5))',\r\n            cursor: 'pointer',\r\n            padding: '5px',\r\n            userSelect: 'none',\r\n            fontSize: '12px',\r\n            height: '60px',\r\n            width: '20px',\r\n            textAlign: 'center',\r\n            ...(isLeft ? {\r\n                right: '-20px',\r\n                left: 'auto',\r\n                borderRadius: '0 5px 5px 0'\r\n            } : {\r\n                left: '-20px',\r\n                right: 'auto',\r\n                borderRadius: '5px 0 0 5px'\r\n            })\r\n        }\r\n        this.isDragging = false;\r\n        this.startY = 0;\r\n        this.startTop = 0;\r\n        this.newTop = 0;\r\n    }\r\n\r\n    // Disable shadow DOM\r\n    protected createRenderRoot(): HTMLElement | DocumentFragment {\r\n        return this;\r\n    }\r\n\r\n    // Lifecycle callback when the element is added to the DOM\r\n    connectedCallback() {\r\n        super.connectedCallback();\r\n        // Add event listeners for dragging\r\n        document.addEventListener('mousemove', this.handleDragMove.bind(this));\r\n        // @ts-ignore // Ignoring potential type issue with mouseup event\r\n        document.addEventListener('mouseup', this.handleDragEnd.bind(this));\r\n        document.addEventListener('touchmove', this.handleDragMove.bind(this));\r\n        // @ts-ignore // Ignoring potential type issue with touchend event\r\n        document.addEventListener('touchend', this.handleDragEnd.bind(this));\r\n    }\r\n\r\n    // Lifecycle callback when the element is removed from the DOM\r\n    disconnectedCallback() {\r\n        super.disconnectedCallback();\r\n        // Remove event listeners for dragging\r\n        document.removeEventListener('mousemove', this.handleDragMove.bind(this));\r\n        // @ts-ignore // Ignoring potential type issue with mouseup event\r\n        document.removeEventListener('mouseup', this.handleDragEnd.bind(this));\r\n        document.removeEventListener('touchmove', this.handleDragMove.bind(this));\r\n        // @ts-ignore // Ignoring potential type issue with touchend event\r\n        document.removeEventListener('touchend', this.handleDragEnd.bind(this));\r\n    }\r\n\r\n    // Render method for the edge controls panel\r\n    protected render(): unknown {\r\n        console.log('render edge controls');\r\n        console.log('isInjectionEnabled', isInjectionEnabled.get());\r\n        console.log('isVisibleSettingsPanel', isVisibleSettingsPanel.get());\r\n\r\n        // Determine horizontal position based on saved position and collapsed state\r\n        const position = savedPosition.get();\r\n        const isLeft = position.includes('left');\r\n        if (isLeft) {\r\n            this.style.left = isEdgeControlsCollapsed.get() ? '-100px' : '0';\r\n            this.style.right = 'auto';\r\n        } else {\r\n            this.style.right = isEdgeControlsCollapsed.get() ? '-100px' : '0';\r\n            this.style.left = 'auto';\r\n        }\r\n\r\n        // Control the display of the edge controls panel based on the hidden signal\r\n        this.style.display = hiddenEdgeControls.get() ? 'none' : 'block';\r\n\r\n        return html`\r\n            <div id=\"html-injector-drag-handle\" @mousedown=${this.handleDragStart} @touchstart=${this.handleDragStart}>\r\n                <div class=\"drag-dots\">\r\n                ${Array.from({ length: 3 }).map(() => html`\r\n                    <div style=\"display: flex; flex-direction: column; justify-content: space-between; height: 15px;\">\r\n                        ${Array.from({ length: 2 }).map(() => html`\r\n                            <div style=\"width: 4px; height: 4px; border-radius: 50%; background-color: var(--smart-theme-body-color);\"></div>\r\n                        `)}\r\n                    </div>\r\n                `)}\r\n                </div>\r\n            </div>\r\n            <label class=\"html-injector-switch\">\r\n                <input type=\"checkbox\" id=\"edge-injection-toggle\" @change=${this.handleToggleChange} .checked=${isInjectionEnabled.get()}>\r\n                <span class=\"html-injector-slider\"></span>\r\n            </label>\r\n            <button id=\"html-injector-toggle-panel\" class=\"html-injector-button menu_button\" @click=${this.toggleSettingsPanel}>${isVisibleSettingsPanel.get() ? \"Show Panel\" : \"Hide Panel\"}</button> <button id=\"toggle-edge-controls\" style=${styleMap(this.toggleEdgeButtonStyle)}\r\n            @click=${this.handleToggleEdgeControls}\r\n            >\r\n            ${isEdgeControlsCollapsed.get() ? '<<' : '>>'}\r\n            </button>\r\n`\r\n    }\r\n\r\n    // Handlers for dragging the edge controls panel\r\n    handleDragStart(e: DragEvent | MouseEvent | TouchEvent) {\r\n        this.isDragging = true;\r\n        // Get the starting Y position based on event type (mouse or touch)\r\n        this.startY = e.type.includes('mouse') ? (e as MouseEvent).clientY : (e as unknown as TouchEvent).touches[0].clientY;\r\n        this.startTop = this.getBoundingClientRect().top; // Get the initial top position\r\n        e.preventDefault(); // Prevent default browser drag behavior\r\n    }\r\n\r\n    handleDragMove(event: DragEvent | MouseEvent | TouchEvent) {\r\n        if (!this.isDragging) {\r\n            return; // Do nothing if not dragging\r\n        }\r\n        // Get the current Y position\r\n        const clientY = event.type.includes('mouse') ? (event as MouseEvent).clientY : (event as unknown as TouchEvent).touches[0].clientY;\r\n        // Calculate the new top position, clamping it within the viewport\r\n        let newTop = this.startTop + (clientY - this.startY);\r\n        newTop = Math.max(0, Math.min(newTop, window.innerHeight - this.offsetHeight));\r\n        this.newTop = newTop; // Store the new top position\r\n        this.style.top = `${newTop}px`; // Apply the new top position\r\n    }\r\n\r\n    handleDragEnd(event: DragEvent) {\r\n        this.isDragging = false; // End dragging\r\n        // If activation mode is custom, save the final top position\r\n        if (activationMode.get() === 'custom') {\r\n            saveTopPosition.set(this.newTop.toString());\r\n        }\r\n    }\r\n\r\n\r\n    // Handler for toggling the collapse state of the edge controls\r\n    handleToggleEdgeControls(event: Event) {\r\n        isEdgeControlsCollapsed.set(!isEdgeControlsCollapsed.get()); // Toggle the collapsed state signal\r\n        const value = isEdgeControlsCollapsed.get();\r\n        const position = savedPosition.get();\r\n        const isLeft = position.includes('left');\r\n\r\n        // Update toggle button text and panel position (Translated from \"更新切换按钮文本和面板位置\")\r\n        const toggleButton = event.target as HTMLElement;\r\n        if (isLeft) {\r\n            this.style.left = value ? '-100px' : '0';\r\n            this.style.right = 'auto';\r\n            toggleButton.textContent = value ? '>>' : '<<';\r\n        } else {\r\n            this.style.right = value ? '-100px' : '0';\r\n            this.style.left = 'auto';\r\n            toggleButton.textContent = value ? '<<' : '>>';\r\n        }\r\n\r\n        // Update button style (Translated from \"更新按钮样式\")\r\n        this.toggleEdgeButtonStyle = {\r\n            ...this.toggleEdgeButtonStyle,\r\n            ...(isLeft ? {\r\n                right: '-20px',\r\n                left: 'auto',\r\n                borderRadius: '0 5px 5px 0'\r\n            } : {\r\n                left: '-20px',\r\n                right: 'auto',\r\n                borderRadius: '5px 0 0 5px'\r\n            })\r\n        };\r\n    }\r\n\r\n    // Handler for the injection toggle switch\r\n    handleToggleChange(event: Event) {\r\n        const target = event.target as HTMLInputElement;\r\n        const isEnabled = target.checked;\r\n        console.log('isEnabled', isEnabled);\r\n        isInjectionEnabled.set(isEnabled); // Update the injection enabled signal\r\n        if (isEnabled) {\r\n            injectHtmlCode(); // Inject HTML if enabled\r\n        } else {\r\n            removeInjectedIframes(); // Remove iframes if disabled\r\n        }\r\n    }\r\n\r\n    // Toggle the visibility of the settings panel by calling the method on the settingsPanel instance\r\n    toggleSettingsPanel(event: Event) {\r\n        this.settingsPanel.toggleSettingsPanel(event);\r\n    }\r\n\r\n    // Update the position of the edge controls (redundant with updateEdgeControlsPosition, might need review)\r\n    updatePosition() {\r\n        this.updateEdgeControlsPosition(savedPosition.get());\r\n    }\r\n\r\n    // Update the position and appearance of the edge controls panel\r\n    updateEdgeControlsPosition(position: string) {\r\n        // Determine if the panel is on the left or right side (Translated from \"确定是左侧还是右侧\")\r\n        const isLeft = position.includes('left');\r\n        // Update the style class of the panel (Translated from \"更新面板的样式类\")\r\n        if (isLeft) {\r\n            this.classList.add('left-side');\r\n        } else {\r\n            this.classList.remove('left-side');\r\n        }\r\n\r\n        // Set the vertical position (Translated from \"设置垂直位置\")\r\n        switch (position) {\r\n            case 'top-right':\r\n            case 'top-left':\r\n                this.style.top = '20vh';\r\n                this.style.transform = 'none';\r\n                break;\r\n            case 'right-three-quarters':\r\n            case 'left-three-quarters':\r\n                this.style.top = '75vh';\r\n                this.style.transform = 'none';\r\n                break;\r\n            case 'right-middle':\r\n            case 'left-middle':\r\n                this.style.top = '50%';\r\n                this.style.transform = 'translateY(-50%)';\r\n                break;\r\n            case 'custom':\r\n                // Use saved top position for custom mode\r\n                this.style.top = saveTopPosition.get() ? `${saveTopPosition.get()}px` : \"20vh\";\r\n                this.style.transform = 'none';\r\n                break;\r\n        }\r\n\r\n        // Set the horizontal position (Translated from \"设置水平位置\")\r\n        if (isLeft) {\r\n            this.style.left = isEdgeControlsCollapsed.get() ? '-100px' : '0';\r\n            this.style.right = 'auto';\r\n        } else {\r\n            this.style.right = isEdgeControlsCollapsed.get() ? '-100px' : '0';\r\n            this.style.left = 'auto';\r\n        }\r\n\r\n        // Update the style of the toggle button (Translated from \"更新切换按钮的样式\")\r\n        this.toggleEdgeButtonStyle = {\r\n            ...this.toggleEdgeButtonStyle,\r\n            ...(isLeft ? {\r\n                right: '-20px',\r\n                left: 'auto',\r\n                borderRadius: '0 5px 5px 0'\r\n            } : {\r\n                left: '-20px',\r\n                right: 'auto',\r\n                borderRadius: '5px 0 0 5px'\r\n            })\r\n        };\r\n        this.requestUpdate(); // Request an update to apply the new styles (Translated from \"请求更新以应用新的样式\")\r\n    }\r\n}\r\n\r\ncustomElements.define('settings-panel', SettingsPanel);\r\ncustomElements.define('edge-controls', EdgeControls);\r\n\r\n// Function to initialize the HTML Injector functionality\r\nexport function initInjector() {\r\n    // Create instances of the custom elements\r\n    const settingsPanel = document.createElement('settings-panel') as SettingsPanel;\r\n    const edgeControls = document.createElement('edge-controls') as EdgeControls;\r\n\r\n    // Assign IDs to the elements\r\n    settingsPanel.id = 'html-injector-settings';\r\n    edgeControls.id = 'html-injector-edge-controls';\r\n\r\n    // Establish cross-references between the two components\r\n    settingsPanel.edgeControls = edgeControls;\r\n    edgeControls.settingsPanel = settingsPanel;\r\n\r\n    // Get the initial saved position\r\n    const position = savedPosition.get();\r\n\r\n    // Add the 'left-side' class if the saved position includes 'left'\r\n    if (position.includes('left')) {\r\n        edgeControls.classList.add('left-side');\r\n    }\r\n\r\n    // Append the elements to the document body\r\n    document.body.appendChild(settingsPanel);\r\n    document.body.appendChild(edgeControls);\r\n\r\n    // Ensure initial position and styles are correct (Translated from \"确保初始位置和样式正确\")\r\n    edgeControls.updateEdgeControlsPosition(position);\r\n\r\n    // Add a resize listener to update the position on window resize\r\n    window.addEventListener(\"resize\", () => {\r\n        edgeControls.updatePosition();\r\n    })\r\n\r\n    // Add a listener for messages from iframes\r\n    window.addEventListener('message', handleMessage);\r\n\r\n    // Add a listener for system theme changes to update iframes\r\n    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', updateAllIframesTheme);\r\n\r\n    // Observe the document body for changes to trigger HTML injection\r\n    observer.observe(document.body, {\r\n        childList: true, // Observe direct children\r\n        subtree: true // Observe all descendants\r\n    })\r\n}\r\n","import{noChange as t}from\"../lit-html.js\";import{directive as s,Directive as i,PartType as r}from\"../directive.js\";\n/**\n * @license\n * Copyright 2018 Google LLC\n * SPDX-License-Identifier: BSD-3-Clause\n */const e=s(class extends i{constructor(t){if(super(t),t.type!==r.ATTRIBUTE||\"class\"!==t.name||t.strings?.length>2)throw Error(\"`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.\")}render(t){return\" \"+Object.keys(t).filter((s=>t[s])).join(\" \")+\" \"}update(s,[i]){if(void 0===this.st){this.st=new Set,void 0!==s.strings&&(this.nt=new Set(s.strings.join(\" \").split(/\\s/).filter((t=>\"\"!==t))));for(const t in i)i[t]&&!this.nt?.has(t)&&this.st.add(t);return this.render(i)}const r=s.element.classList;for(const t of this.st)t in i||(r.remove(t),this.st.delete(t));for(const t in i){const s=!!i[t];s===this.st.has(t)||this.nt?.has(t)||(s?(r.add(t),this.st.add(t)):(r.remove(t),this.st.delete(t)))}return t}});export{e as classMap};\n//# sourceMappingURL=class-map.js.map\n","import { LitElement, html, type PropertyDeclarations } from 'lit';\r\nimport { classMap } from 'lit/directives/class-map.js';\r\nimport { htmlInjectorSettings } from 'utils/setting';\r\n\r\n// Get the signal for hiding/showing edge controls\r\nconst { hiddenEdgeControls } = htmlInjectorSettings.getSignals();\r\n\r\nclass ZerxzLibContainer extends LitElement {\r\n    // Disable shadow DOM\r\n    protected createRenderRoot(): HTMLElement | DocumentFragment {\r\n        return this;\r\n    }\r\n\r\n    render() {\r\n        // Render the HTML template\r\n        return html`\r\n    <div class=\"zerxz-lib-settings\">\r\n        <div class=\"inline-drawer\">\r\n            <div class=\"inline-drawer-toggle inline-drawer-header\">\r\n                <b>ZerxzLib</b>\r\n                <div class=\"inline-drawer-icon fa-solid fa-circle-chevron-down down\"></div>\r\n            </div>\r\n            <div class=\"inline-drawer-content\" >\r\n    <div class=\"flex-container\" >\r\n        <div class=\"menu_button menu_button_icon interactable\" @click=${this.handlerHiddenEdgeControl}>\r\n            <i class=${classMap({\r\n                \"fa-solid\": true,\r\n                \"fa-bug\": hiddenEdgeControls.get(), // Assuming 'fa-bug' indicates hidden/issue\r\n                \"fa-bug-slash\": !hiddenEdgeControls.get(), // Assuming 'fa-bug-slash' indicates visible/no issue\r\n            })} ></i>\r\n            <small >${!hiddenEdgeControls.get() ? \"Hide\" : \"Show\"} Controls Panel</small>\r\n        </div>\r\n    </div>\r\n    <hr>\r\n</div>\r\n        </div>\r\n    </div>\r\n    `;\r\n    }\r\n\r\n    // Handler for toggling the visibility of edge controls\r\n    handlerHiddenEdgeControl() {\r\n        hiddenEdgeControls.set(!hiddenEdgeControls.get());\r\n        this.requestUpdate(); // Request a re-render to update the text and icon\r\n    }\r\n}\r\n\r\n// Define the custom element\r\ncustomElements.define('zerxz-lib-container', ZerxzLibContainer);\r\n\r\n// Function to initialize and append the container to the DOM\r\nexport function initContainer() {\r\n    const container = document.createElement('zerxz-lib-container');\r\n    container.className = \"extension_container\";\r\n    container.id = \"zerxzlib_container\";\r\n    const root = document.getElementById(\"extensions_settings2\"); // Target element to append to\r\n    if (!root) {\r\n        console.error(\"Root element #extensions_settings2 not found.\"); // Log error if root is missing\r\n        return;\r\n    }\r\n    root.appendChild(container);\r\n}\r\n","import {\r\n\teventSource,\r\n\tevent_types,\r\n} from \"@silly-tavern/script.js\";\r\nimport { getGeminiModel, getSecrets, isGeminiSource, saveKey, switchSecretsFromArray, throwGeminiError, STATE, CUSTOM_KEY, initGeminiModels, initToastr } from \"./utils\";\r\n\r\nimport \"./layouts/GeminiLayouts\";\r\nimport { initInjector } from \"./layouts/HtmlInjector\";\r\nimport type { GeminiLayouts } from \"./layouts/GeminiLayouts\";\r\nimport { initContainer } from \"layouts/ExtensionContainer\";\r\n\r\n; (async () => {\r\n\t// Initialize Toastr notifications\r\n\tinitToastr();\r\n\t// Initialize the HTML injector\r\n\tinitInjector();\r\n\t// Initialize the extension container\r\n\tinitContainer();\r\n\t// Get the form element with id \"makersuite_form\" using a jQuery selector (Translated from \"获取form元素 id为\"makersuite_form\"的元素 用jquery的选择器\")\r\n\tconst secrets = (await getSecrets()) ?? {};\r\n\t// Initialize Gemini models with fetched secrets\r\n\tawait initGeminiModels(secrets);\r\n\tconst form = $(\"#makersuite_form\")[0];\r\n\tconsole.log(\"secrets\", secrets);\r\n\t// Create a new GeminiLayouts element\r\n\tconst geminiLayout = document.createElement(\"gemini-layouts\") as GeminiLayouts;\r\n\t// Set properties of the geminiLayout component based on secrets and state\r\n\tgeminiLayout.currentKey = secrets.api_key_makersuite\r\n\tgeminiLayout.lastKey = secrets[CUSTOM_KEY]?.split(\"\\n\").pop() || \"\"\r\n\tgeminiLayout.throwGeminiErrorState = STATE.throwGeminiErrorState\r\n\tgeminiLayout.switchKeyMakerSuite = STATE.switchState\r\n\tgeminiLayout.apiKeys = secrets[CUSTOM_KEY] || \"\"\r\n\r\n\t// Append the geminiLayout component to the form\r\n\tform.appendChild(geminiLayout);\r\n\r\n\t// Listen for the CHAT_COMPLETION_SETTINGS_READY event to switch secrets\r\n\teventSource.on(\r\n\t\tevent_types.CHAT_COMPLETION_SETTINGS_READY,\r\n\t\tswitchSecretsFromArray,\r\n\t);\r\n\t// Listen for the CHATCOMPLETION_MODEL_CHANGED event to save the selected model\r\n\teventSource.on(event_types.CHATCOMPLETION_MODEL_CHANGED, async (model: string) => {\r\n\t\tif (isGeminiSource()) await saveKey(\"api_key_makersuite_model\", model);\r\n\t})\r\n})();\r\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","y","x","d","__WEBPACK_EXTERNAL_MODULE__script_js_588e7203__","__WEBPACK_EXTERNAL_MODULE__scripts_openai_js_991751fb__","__WEBPACK_EXTERNAL_MODULE__scripts_popup_js_d782a329__","CUSTOM_KEY","STATE","switchState","localStorage","getItem","throwGeminiErrorState","__WEBPACK_EXTERNAL_MODULE__scripts_secrets_js_e26d24e7__","async","getSecrets","response","fetch","method","headers","getRequestHeaders","status","callGenericPopup","POPUP_TYPE","TEXT","ok","json","switchSecretsFromArray","_secrets$CUSTOM_KEY","secrets","api_keys","split","map","v","trim","filter","startsWith","length","currentKey","api_key_makersuite","firstKeyApi","includes","splice","indexOf","push","writeSecret","saveKey","join","textarea","$","currentKeyElement","lastKeyElement","console","log","textContent","concat","value","isUpdateSecretDisplay","arguments","undefined","updateSecretDisplay","saveSettingsDebounced","GEMINI_SOURCES","isGeminiSource","oai_settings","chat_completion_source","throwGeminiError","text","large","wide","allowVerticalScrolling","initGeminiModels","_secrets$models_maker","_secrets$api_key_make","modelStr","JSON","parse","models_makersuite","api_key","optgroup","primaryVersions","subVersions","subVersionsArray","Array","from","children","primaryVersionsArray","subVersionsValues","el","originalVersions","flat","cachedVersions","model","option","document","createElement","name","appendChild","geminiModels","result","data","models","modelData","replace","displayName","e","error","getGeminiModel","geminiModelOptions","stringify","uniqueModels","Set","api_key_makersuite_model","has","google_model","val","attr","oldError","toastr","globalThis","ShadowRoot","ShadyCSS","nativeShadow","Document","CSSStyleSheet","s","Symbol","WeakMap","n","constructor","t","this","_$cssResult$","Error","cssText","styleSheet","replaceSync","set","toString","c","cssRules","r","is","getOwnPropertyDescriptor","getOwnPropertyNames","h","getOwnPropertySymbols","getPrototypeOf","a","trustedTypes","l","emptyScript","p","reactiveElementPolyfillSupport","u","toAttribute","Boolean","fromAttribute","i","Number","f","attribute","type","String","converter","reflect","hasChanged","metadata","litPropertyMetadata","b","HTMLElement","addInitializer","_$Ei","observedAttributes","finalize","_$Eh","keys","createProperty","state","elementProperties","noAccessor","getPropertyDescriptor","requestUpdate","configurable","getPropertyOptions","Map","finalized","properties","_$Eu","elementStyles","finalizeStyles","styles","isArray","reverse","unshift","toLowerCase","super","_$Ep","isUpdatePending","hasUpdated","_$Em","_$Ev","_$ES","Promise","enableUpdating","_$AL","_$E_","forEach","addController","_$EO","add","renderRoot","isConnected","hostConnected","removeController","delete","size","createRenderRoot","shadowRoot","attachShadow","shadowRootOptions","adoptedStyleSheets","litNonce","setAttribute","connectedCallback","disconnectedCallback","hostDisconnected","attributeChangedCallback","_$AK","_$EC","removeAttribute","P","_$ET","_$Ej","reject","scheduleUpdate","performUpdate","wrapped","shouldUpdate","willUpdate","hostUpdate","update","_$EU","_$AE","hostUpdated","firstUpdated","updated","updateComplete","getUpdateComplete","mode","ReactiveElement","reactiveElementVersions","createPolicy","createHTML","Math","random","toFixed","slice","createComment","iterator","_","m","RegExp","g","_$litType$","strings","values","T","for","E","A","C","createTreeWalker","V","lastIndex","exec","test","N","parts","currentNode","content","firstChild","replaceWith","childNodes","nextNode","nodeType","hasAttributes","getAttributeNames","endsWith","getAttribute","index","ctor","H","I","L","k","tagName","append","innerHTML","_$Co","_$Cl","_$litDirective$","_$AO","_$AT","_$AS","M","_$AV","_$AN","_$AD","_$AM","parentNode","_$AU","creationScope","importNode","R","nextSibling","z","_$AI","_$Cv","_$AH","_$AA","_$AB","options","startNode","endNode","_$AR","O","insertBefore","createTextNode","_$AC","_$AP","remove","setConnected","element","fill","j","toggleAttribute","capture","once","passive","removeEventListener","addEventListener","handleEvent","host","Z","D","U","B","F","litHtmlPolyfillSupport","litHtmlVersions","renderOptions","_$Do","renderBefore","render","_$litPart$","_$litElement$","litElementHydrateSupport","LitElement","litElementPolyfillSupport","litElementVersions","_$Ct","_$Ci","_$AQ","dt","ut","w","GeminiLayouts","lastKey","switchKeyMakerSuite","apiKeys","buttons","handle","handleSaveKey","handleGetNewModel","handleSwitchKeyMakerSuite","handleThrowGeminiError","handleSwitchGeminiError","html","_templateObject","_taggedTemplateLiteral","handleTextareaInput","repeat","_ref","_ref2","_templateObject2","event","target","fistValue","setItem","_defineProperty","customElements","define","reconnected","disconnected","setValue","Y","rt","lt","ct","ht","__defProp","__publicField","writable","__defNormalProp","__privateIn","member","TypeError","__privateAdd","WeakSet","__privateMethod","msg","__accessCheck","defaultEquals","activeConsumer","inNotificationPhase","epoch","SIGNAL","setActiveConsumer","consumer","prev","REACTIVE_NODE","version","lastCleanEpoch","dirty","producerNode","producerLastReadVersion","producerIndexOfThis","nextProducerIndex","liveConsumerNode","liveConsumerIndexOfThis","consumerAllowSignalWrites","consumerIsAlwaysLive","producerMustRecompute","producerRecomputeValue","consumerMarkedDirty","consumerOnSignalRead","producerAccessed","node","ngDevMode","idx","assertConsumerNode","consumerIsLive","producerRemoveLiveConsumerAtIndex","producerAddLiveConsumer","producerUpdateValueVersion","producer","seenVersion","consumerPollProducersForChange","producerNotifyConsumers","consumerMarkDirty","_a","wrapper","indexOfThis","assertProducerNode","watched","unwatched","lastIdx","idxProducer","computedGet","ERRORED","UNSET","COMPUTING","COMPUTED_NODE","equal","oldValue","prevConsumer","consumerBeforeComputation","newValue","wasEqual","computation","err","pop","consumerAfterComputation","throwInvalidWriteToSignalErrorFn","signalGetFn","signalSetFn","signalValueChanged","SIGNAL_NODE","NODE","Signal","Signal2","_brand","_b","_brand2","isState","State","initialValue","ref","create","getter","createSignal","equals","subtle","isComputed","Computed","computed","createComputed","subtle2","_a2","_brand3","_assertSignals","assertSignals_fn","untrack","cb","output","prevActiveConsumer","introspectSources","sink","_a3","isWatcher","introspectSinks","signal","hasSinks","hasSources","signals","Watcher","notify","watch","unwatch","idxConsumer","getPending","currentComputed","FinalizationRegistry","watcher","warn","_$St","_$Si","_$So","_$Sh","_$Sl","_$Su","_$Sv","register","_$Sp","commit","clear","queueMicrotask","_$SW","_$Sj","_$SO","reduce","style","ft","removeProperty","setProperty","__WEBPACK_EXTERNAL_MODULE__scripts_extensions_js_86ff8498__","extensionName","extensionFolderPath","_extension_settings$e","extension_settings","extensionSettings","getExtensionSettings","htmlInjectorSettings","path","_defaultSettings","_extensionSettings$pa","_signals$path","_extensionSettings","settings","_extensionSettings$ke","_signals","_signals$key","setSetting","rawSignal","getSetting","setSettings","assign","getSettings","getSignal","_signals$_ref","getSignals","useExtensionSetting","lastMesTextContent","isInjectionEnabled","displayMode","parseInt","activationMode","customStartFloor","customEndFloor","savedPosition","isEdgeControlsCollapsed","isVisibleSettingsPanel","saveTopPosition","hiddenEdgeControls","chatElement","observer","MutationObserver","mutations","canInject","mutation","addedNodes","some","Node","ELEMENT_NODE","classList","contains","querySelector","removeInjectedIframes","injectHtmlCode","IFrameManager","getInstance","instance","createIframe","htmlContent","iframe","setupIframeAttributes","srcdoc","getIframeSrcContent","setupIframeEventListeners","width","border","marginTop","transition","onload","adjustIframeHeight","setTimeout","updateIframeTheme","getSystemTheme","contentWindow","resizeObserver","ResizeObserver","resizeObservers","_iframe$contentWindow","body","observe","_iframe$contentWindow2","height","max","documentElement","scrollHeight","theme","_iframe$contentWindow3","postMessage","removeIframe","disconnect","iframeManager","iframes","querySelectorAll","codeElements","code","display","details","closest","_details$parentNode","specificMesText","mesTextElements","find","targetElements","start","end","_codeElement$parentNo2","mesText","codeElement","innerText","_codeElement$parentNo","summary","window","matchMedia","matches","updateAllIframesTheme","handleMessage","source","_iframe$contentWindow4","buttonName","jQuery","each","trigger","sendTextarea","getElementById","dispatchEvent","Event","bubbles","sendButton","click","SettingsPanel","SignalWatcher","createRef","toggleSettingsPanel","handleSavePositionChange","handleDisplayModeChange","handleActivationModeChange","styleMap","customFloorSettingsRef","handleCustomStartFloorChange","handleCustomEndFloorChange","LastSettingsRef","handleLastNFloorsChange","updateInjection","edgeControls","updateEdgeControlsPosition","isVisible","EdgeControls","isLeft","toggleEdgeButtonStyle","_objectSpread","position","top","transform","backgroundColor","color","cursor","padding","userSelect","fontSize","textAlign","right","left","borderRadius","isDragging","startY","startTop","newTop","handleDragMove","bind","handleDragEnd","handleDragStart","_templateObject3","_templateObject4","handleToggleChange","handleToggleEdgeControls","clientY","touches","getBoundingClientRect","preventDefault","min","innerHeight","offsetHeight","toggleButton","isEnabled","checked","settingsPanel","updatePosition","st","nt","handlerHiddenEdgeControl","classMap","_await$getSecrets","_len","args","_key","message","id","childList","subtree","initInjector","container","className","root","initContainer","form","geminiLayout","eventSource","on","event_types","CHAT_COMPLETION_SETTINGS_READY","CHATCOMPLETION_MODEL_CHANGED"],"sourceRoot":""}